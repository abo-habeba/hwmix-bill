import{z as ie,r,h as le,o as v,c as Y,d as e,j as a,b as d,a9 as h,U as q,ah as te,a4 as K,a5 as x,bk as xe,bl as Q,a1 as N,t as c,u as F,k as p,az as oe,q as g,W as ee,a6 as J,a as n,au as H,Y as Z,X as se,F as ae,Z as ue,P as Ce,ap as ne,w as re,ao as we,a3 as Te,aI as he,_ as Ue,ax as $e,A as pe,aw as De,aA as Ne,ay as Ie,M as Se,aQ as Me,bf as Pe,H as Ae,m as Oe,V as me,$ as R,bm as qe}from"./index-BkFnaqPs.js";import{_ as ze}from"./ContextMenu-BYrGwoFu.js";const Re={__name:"CashBoxSwitcher",props:{box:{required:!0}},emits:["operation-success"],setup(U,{emit:k}){const M=k,$=ie(),V=r(!1),B=r(null),o=r(!1),y=r(1),C=r(null),T=r("اختر خزنة"),O=r(""),m=U;console.log(m.box);const b=r(m.box),w=le(()=>$.user.cashBoxes.filter(f=>f.id!==m.box.id)),I=()=>{y.value++};function P(){o.value=!0}async function D(){let f={to_user_id:$.user.id,amount:C.value,to_cashBoxId:T.value.id,cashBoxId:m.box.id,description:O.value};try{await ue("cashBox/transfer",f,!1,!0,!0),await $.fetchUser(),M("operation-success"),V.value=!1}catch(t){console.log(t)}}const z=le(()=>{var f;return!(C.value&&Number(C.value)>0&&Number(C.value)<=Number(((f=b.value)==null?void 0:f.balance)||0)&&T.value!=="اختر خزنة")});return(f,t)=>(v(),Y(ae,null,[e(h,{class:"ma-2",variant:"text",onClick:t[0]||(t[0]=i=>V.value=!0)},{default:a(()=>t[8]||(t[8]=[d(" التحويل بين خزائنك ")])),_:1}),e(se,{modelValue:V.value,"onUpdate:modelValue":t[7]||(t[7]=i=>V.value=i),"max-width":"500px"},{default:a(()=>[e(q,{class:"pa-5"},{default:a(()=>[e(te,{class:"pa-0"},{default:a(()=>t[9]||(t[9]=[d("التحويل بين خزائنك")])),_:1}),e(K,null,{default:a(()=>[e(x,{cols:"12"},{default:a(()=>[e(q,{class:"mx-auto pa-2","max-width":"500"},{default:a(()=>[e(xe,{modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=i=>y.value=i)},{default:a(()=>[e(Q,{value:1},{default:a(()=>[e(x,{cols:"12",class:"text-center ma-0 pa-0"},{default:a(()=>[e(N,{class:"pa-1"},{default:a(()=>t[10]||(t[10]=[d("رصيدك الحالي ")])),_:1}),e(N,{class:"pa-0"},{default:a(()=>[d(c(b.value.balance),1)]),_:1})]),_:1}),e(x,{cols:"12"},{default:a(()=>[F($).user.cashBoxes?(v(),p(oe,{key:0,rounded:"",label:"الخزنة المحول إليها",modelValue:T.value,"onUpdate:modelValue":[t[1]||(t[1]=i=>T.value=i),P],items:F(w),"item-value":"id","item-title":"name","return-object":""},null,8,["modelValue","items"])):g("",!0)]),_:1}),B.value?(v(),p(x,{key:0,cols:"12",class:"ma-0 pa-0"},{default:a(()=>[Number(b.value.balance)<Number(C.value)?(v(),p(ee,{key:0,class:"py-1 my-3",border:"start",type:"error",variant:"outlined"},{default:a(()=>t[11]||(t[11]=[d(" الرصيد الحالي لا يكفي ")])),_:1})):g("",!0)]),_:1})):g("",!0),e(x,{cols:"12"},{default:a(()=>[e(J,{modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=i=>C.value=i),type:"Number",label:"المبلغ",rounded:"",placeholder:"ادخل المبلغ المراد تحويله"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12"},{default:a(()=>[e(J,{modelValue:O.value,"onUpdate:modelValue":t[3]||(t[3]=i=>O.value=i),label:"الوصف",rounded:"",placeholder:"ادخل ملاحظة او وصف او سبب للتحويل اختياري"},null,8,["modelValue"])]),_:1})]),_:1}),e(Q,{value:2},{default:a(()=>[e(x,{cols:"12",class:"text-center"},{default:a(()=>[e(N,{class:"pa-0"},{default:a(()=>t[12]||(t[12]=[d("تحويل")])),_:1}),e(te,{class:"pa-0"},{default:a(()=>[d(c(C.value),1)]),_:1}),e(N,{class:"pa-0"},{default:a(()=>[d("من "+c(b.value.name),1)]),_:1}),e(N,{class:"pa-0"},{default:a(()=>[d("الي "+c(T.value.name),1)]),_:1})]),_:1})]),_:1}),e(Q,{value:3},{default:a(()=>t[13]||(t[13]=[n("div",{class:"pa-4 text-center"},"تم التحويل",-1)])),_:1})]),_:1},8,["modelValue"]),e(H,null,{default:a(()=>[y.value>1?(v(),p(h,{key:0,class:"mx-10",variant:"text",onClick:t[5]||(t[5]=i=>y.value--)},{default:a(()=>t[14]||(t[14]=[d(" السابق ")])),_:1})):g("",!0),e(Z),y.value<2?(v(),p(h,{key:1,class:"mx-10",disabled:F(z),variant:"text",color:"primary",onClick:I},{default:a(()=>t[15]||(t[15]=[d(" التالي ")])),_:1},8,["disabled"])):g("",!0)]),_:1})]),_:1})]),_:1}),e(H,null,{default:a(()=>[e(h,{text:"إغلاق","prepend-icon":"ri-close-line",onClick:t[6]||(t[6]=i=>V.value=!1)}),e(Z),y.value>1?(v(),p(h,{key:0,text:"تأكيد","prepend-icon":"ri-check-line",onClick:D})):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Fe={class:"detail"},We={class:"value"},je={class:"detail"},Ee={class:"value"},Je={class:"detail"},Le={class:"value"},He={class:"detail"},Qe={class:"value"},Xe={class:"detail"},Ye={class:"value"},Ze={class:"detail"},Ge={class:"value"},Ke={class:"detail"},ea={class:"value"},aa={class:"detail"},la={class:"value"},ta={class:"detail"},sa={class:"value"},oa={class:"my-3"},ua={class:"value"},na={__name:"TransactionDialog",props:{transaction:{required:!0}},emits:["operation-success"],setup(U,{expose:k,emit:M}){ie();const $=r(!1);function V(){$.value=!0}return k({operationDialog:V}),(B,o)=>(v(),p(se,{modelValue:$.value,"onUpdate:modelValue":o[1]||(o[1]=y=>$.value=y),"max-width":"500px"},{default:a(()=>[e(q,{class:"pa-5"},{default:a(()=>[o[12]||(o[12]=n("h2",null,"تفاصيل العملية",-1)),n("div",Fe,[o[2]||(o[2]=n("span",{class:"label"},"نوع العملية",-1)),n("span",We,c(U.transaction.type),1)]),n("div",je,[o[3]||(o[3]=n("span",{class:"label"},"المبلغ",-1)),n("span",Ee,c(U.transaction.amount),1)]),n("div",Je,[o[4]||(o[4]=n("span",{class:"label"},"التاريخ",-1)),n("span",Le,c(U.transaction.created_at),1)]),n("div",He,[o[5]||(o[5]=n("span",{class:"label"},"الرصيد قبل ",-1)),n("span",Qe,c(U.transaction.balance_before),1)]),n("div",Xe,[o[6]||(o[6]=n("span",{class:"label"},"الرصيد بعد ",-1)),n("span",Ye,c(U.transaction.balance_after),1)]),n("div",Ze,[o[7]||(o[7]=n("span",{class:"label"},"الوصف",-1)),n("span",Ge,c(U.transaction.description),1)]),n("div",Ke,[o[8]||(o[8]=n("span",{class:"label"},"اسم الخزنة",-1)),n("span",ea,c(U.transaction.cashbox_name),1)]),o[13]||(o[13]=n("h4",null,"تفاصيل المستلم",-1)),n("div",aa,[o[9]||(o[9]=n("span",{class:"label"},"اسم المستلم",-1)),n("span",la,c(U.transaction.target_user.nickname),1)]),n("div",ta,[o[10]||(o[10]=n("span",{class:"label"},"اسم الخزنة ",-1)),n("span",sa,c(U.transaction.target_cashbox_name),1)]),o[14]||(o[14]=n("hr",null,null,-1)),n("div",oa,[o[11]||(o[11]=n("h4",null,"تفاصيل العملية",-1)),n("span",ua,c(U.transaction.readable_description),1)]),e(h,{class:"pa-0",text:"إغلاق","prepend-icon":"ri-close-line",onClick:o[0]||(o[0]=y=>$.value=!1)})]),_:1})]),_:1},8,["modelValue"]))}},ra={__name:"DataTable",props:{cashBoxId:{type:[Number,String],required:!1}},setup(U,{expose:k}){const M=U,$=r([]),V=r(0),B=r([]),o=r(null),y=r(!1),C=r(10),T=r({page:1,sortBy:[],itemsPerPage:10}),O=r([{title:"#",key:"index",sortable:!1},{title:"نوع العملية",key:"type",align:"start"},{title:"المبلغ",key:"amount",align:"start"},{title:"التاريخ",key:"created_at",align:"center"},{title:"الوصف",key:"description",sortable:!1,align:"center"},{title:"إجراءات",key:"action",sortable:!1,align:"end"}]);Ce(()=>{w()});const m=r(null),b=r(null);async function w(){if(!M.cashBoxId){console.warn("cashBoxId غير موجود، لا يمكن جلب المعاملات."),B.value=[],V.value=0,y.value=!1;return}y.value=!0;try{const{page:t,itemsPerPage:i,sortBy:A}=T.value,W=A.length?A[0].key:"id",S=A.length&&A[0].order?A[0].order:"desc",X=i===-1?V.value:i,G=await ne(`transactions/user/${M.cashBoxId}`,{page:t,per_page:X,sort_by:W,sort_order:S});B.value=G.data||[],V.value=G.total||0}catch(t){console.error("خطأ في جلب المعاملات:",t),B.value=[],V.value=0}finally{y.value=!1}}re([()=>M.cashBoxId,T],([t,i],[A,W])=>{(t!==A||JSON.stringify(i)!==JSON.stringify(W))&&w()},{deep:!0,immediate:!0});const I=(t,{item:i})=>{o.value=i,m.value&&m.value.operationDialog()},P=(t,{item:i})=>{o.value=i,t.preventDefault(),b.value&&b.value.showContextMenu(t)},D=r([{title:"عرض التفاصيل",color:"#17a2b8",icon:"ri-eye-line",callback:()=>{o.value&&I(null,{item:o.value}),z()}}]),z=()=>{b.value&&b.value.colsContextMenu()};function f({item:t,index:i}){return{class:t.status==="completed"?"success-row":t.status==="failed"?"error-row":"default-row","data-index":i}}return k({fetchTransactions:w}),(t,i)=>{const A=na,W=ze;return v(),p(he,{id:"dataTable",style:{position:"relative !important"}},{default:a(()=>[e(we,{style:{"white-space":"nowrap"},"item-value":"id","items-per-page":C.value,"onUpdate:itemsPerPage":i[0]||(i[0]=S=>C.value=S),options:T.value,"onUpdate:options":[i[1]||(i[1]=S=>T.value=S),w],headers:O.value,items:B.value,"items-length":V.value,loading:y.value,hover:"","show-current-page":"","row-props":f,modelValue:$.value,"onUpdate:modelValue":i[2]||(i[2]=S=>$.value=S),"loading-text":"جاري تحميل البيانات","no-data-text":"لا توجد بيانات","items-per-page-text":"عدد الصفوف في الصفحة","onContextmenu:row":P,"onClick:row":I},{"item.index":a(({index:S})=>[d(c(S+1),1)]),"item.action":a(({item:S})=>[e(h,{density:"compact",variant:"text",color:"#0086CD","prepend-icon":"ri-more-2-fill",onClick:Te(X=>P(X,{item:S}),["stop"])},null,8,["onClick"])]),_:1},8,["items-per-page","options","headers","items","items-length","loading","modelValue"]),e(A,{ref_key:"transactionDialogRef",ref:m,transaction:o.value},null,8,["transaction"]),e(W,{ref_key:"contextMenuRef",ref:b,actions:D.value},null,8,["actions"])]),_:1})}}},ia={style:{"font-size":"30px"}},da={key:0},va={class:"pa-4 text-center"},ca={__name:"cashbox",setup(U){const k=ie(),M=r(!1),$=r(!1),V=r(!1),B=r(null),o=r(!1),y=r(null),C=r(""),T=r([]),O=r("ادخل رقم هاتف أو كود للبحث"),m=r(null),b=r(null),w=r(null),I=r(null),P=r(""),D=r(1),z=r(!1),f=r({name:"",balance:null,cash_box_type_id:null}),t=r([]),i=r(!1);let A=null;function W(u){C.value=u,clearTimeout(A),C.value?A=setTimeout(()=>{S()},300):(T.value=[],V.value=!1,O.value="ادخل رقم هاتف أو كود للبحث")}async function S(){V.value=!0,T.value=[],O.value="لا توجد بيانات لعرضها";try{const u=await ne("users/search",{search:C.value},!1,!1,!1);u.data.length?T.value=u.data:O.value=`لم يتم العثور علي "${C.value}"`}catch(u){console.error("خطأ في البحث:",u),R.error("حدث خطأ أثناء البحث، يرجى المحاولة لاحقًا."),O.value="حدث خطأ أثناء البحث، يرجى المحاولة لاحقًا."}finally{V.value=!1}}re(m,u=>{if(u){const l=k.user.cashBoxes.find(s=>s.id===B.value);l&&(b.value=l,I.value=u.cashBoxes.find(s=>s.cash_type===l.cash_type)||u.cashBoxes[0],M.value=!0,D.value=1)}});const X=le(()=>!m.value||!b.value?!1:m.value.cashBoxes.some(u=>u.cash_type===b.value.cash_type)),G=le(()=>{var u;return!w.value||Number(w.value)<=0||Number(w.value)>Number(((u=b.value)==null?void 0:u.balance)||0)||!I.value});async function ye(){const u={to_user_id:m.value.id,amount:w.value,to_cashBoxId:I.value.id,cashBoxId:B.value,description:P.value};try{await ue("cashBox/transfer",u,!1,!0,!0),R.success("تم التحويل بنجاح."),await k.fetchUser(),de(),D.value=3,w.value=null,P.value=""}catch(l){console.error("خطأ في التحويل:",l),R.error("حدث خطأ أثناء التحويل، يرجى المحاولة لاحقًا.")}}async function be(u){try{await qe(`user/${k.user.id}/cashbox/${u}/set-default`,!0,!0),k.user.cashBoxes.forEach(l=>{l.is_default=l.id===u?"1":"0"}),R.success("تم تعيين الخزنة كافتراضية.")}catch(l){console.error("خطأ في تعيين الافتراضي:",l),R.error("حدث خطأ أثناء تعيين الخزنة كافتراضية.")}}function de(){y.value&&typeof y.value.fetchTransactions=="function"&&y.value.fetchTransactions()}function Ve(){M.value=!1,D.value=1,o.value=!1,C.value="",T.value=[],m.value=null,b.value=null,w.value=null,I.value=null,P.value=""}function _e(){z.value=!0,ge()}async function ge(){try{const u=await ne("cashBoxTypes",{per_page:-1},!1,!1,!1);t.value=u.map(s=>({id:s.id,title:s.name,value:s.name}));const l=t.value.find(s=>s.title==="نقدي");l&&(f.cash_box_type_id=l.id),console.log("defaultType",l.id),f.value.cash_box_type_id=l.value}catch(u){console.error("خطأ في جلب أنواع الخزائن:",u),R.error("حدث خطأ أثناء جلب أنواع الخزائن.")}}async function ke(){i.value=!0;try{await ue("cashBox",f.value,!1,!0,!0),R.success("تم إضافة الخزنة بنجاح."),await k.fetchUser(),ve()}catch(u){console.error("خطأ في إضافة الخزنة:",u),R.error("حدث خطأ أثناء إضافة الخزنة، يرجى المحاولة لاحقًا.")}finally{i.value=!1}}function ve(){z.value=!1,f.value={name:"",balance:null,cash_box_type_id:null}}function Be(u){if(!u)return"";const l=u.full_name||"بدون اسم",s=u.nickname?`(${u.nickname})`:"",j=u.phone?`📞 ${u.phone}`:"بدون هاتف",_=u.id?`كود ${u.id}`:"";return`${l} ${s} ${j} ${_}`.replace(/\s+/g," ").trim()}return re(()=>{var u;return(u=k.user)==null?void 0:u.cashBoxes},u=>{u&&u.length>0&&!B.value&&(B.value=u[0].id)},{immediate:!0}),(u,l)=>(v(),Y(ae,null,[e(x,{cols:"12"},{default:a(()=>[e(q,{class:"pa-2"},{default:a(()=>{var s,j;return[e(K,{class:"align-center"},{default:a(()=>[e(x,{cols:"auto"},{default:a(()=>l[18]||(l[18]=[n("h2",{class:"text-h5"},"الخزائن",-1)])),_:1}),e(x,{cols:"auto",class:"mr-auto my-6"},{default:a(()=>[e(h,{class:"btn-add",color:"primary",variant:"text","prepend-icon":"ri-add-line",onClick:_e},{default:a(()=>l[19]||(l[19]=[d(" إضافة خزنة ")])),_:1})]),_:1})]),_:1}),(j=(s=F(k).user)==null?void 0:s.cashBoxes)!=null&&j.length?(v(),p(q,{key:0,class:"pa-2"},{default:a(()=>[e($e,{modelValue:B.value,"onUpdate:modelValue":l[0]||(l[0]=_=>B.value=_),"align-tabs":"center"},{default:a(()=>[(v(!0),Y(ae,null,pe(F(k).user.cashBoxes,_=>(v(),p(De,{key:_.id,value:_.id},{default:a(()=>[d(c(_.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(Ne,{modelValue:B.value,"onUpdate:modelValue":l[5]||(l[5]=_=>B.value=_)},{default:a(()=>[(v(!0),Y(ae,null,pe(F(k).user.cashBoxes,_=>(v(),p(Ie,{class:"ma-2 pa-2",key:_.id,value:_.id},{default:a(()=>[e(q,{class:"text-center mx-auto ma-2 pa-2","max-width":"368"},{default:a(()=>[e(N,null,{default:a(()=>[e(K,null,{default:a(()=>[e(x,{cols:"12"},{default:a(()=>[_.is_default!=="1"?(v(),p(h,{key:0,variant:"text",class:"ma-0 py-0",onClick:E=>be(_.id)},{default:a(()=>l[20]||(l[20]=[d(" تعيين كافتراضي ")])),_:2},1032,["onClick"])):g("",!0)]),_:2},1024),e(x,{cols:"12"},{default:a(()=>[n("span",ia,c(_.balance),1),l[21]||(l[21]=n("span",{style:{"font-size":"30px"}}," ج ",-1))]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Se),e(H,null,{default:a(()=>[e(h,{class:"ma-1",text:o.value?"إلغاء التحويل":"تحويل نقود",onClick:l[1]||(l[1]=E=>o.value=!o.value)},null,8,["text"]),e(Z),F(k).user.cashBoxes.length>1?(v(),p(Re,{key:0,box:_,onOperationSuccess:de},null,8,["box"])):g("",!0)]),_:2},1024),e(Me,{class:"pa-2"},{default:a(()=>[o.value?(v(),Y("div",da,[e(x,{cols:"12"},{default:a(()=>[e(Pe,{"item-title":Be,"prepend-inner-icon":"ri-search-line",class:"mx-auto",density:"comfortable",placeholder:"ادخل رقم الهاتف او كود المستخدم",variant:"solo",rounded:"",modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=E=>m.value=E),items:T.value,"return-object":"",loading:V.value,"no-data-text":O.value,"onUpdate:search":W,onFocus:l[3]||(l[3]=E=>$.value=!0),onBlur:l[4]||(l[4]=E=>$.value=!1)},{item:a(({props:E,item:L})=>{var ce,fe;return[e(Ae,Oe({ref_for:!0},E,{title:(ce=L==null?void 0:L.raw)==null?void 0:ce.nickname,subtitle:(fe=L==null?void 0:L.raw)==null?void 0:fe.phone}),null,16,["title","subtitle"])]}),_:1},8,["modelValue","items","loading","no-data-text"])]),_:1})])):g("",!0)]),_:1})]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(v(),p(q,{key:1},{default:a(()=>[e(N,{class:"text-center"},{default:a(()=>[e(me,{color:"primary",size:"100"},{default:a(()=>l[22]||(l[22]=[d("ri-cash-line")])),_:1}),l[23]||(l[23]=n("div",{class:"mt-2"},"لا توجد خزائن نقود متاحة",-1))]),_:1})]),_:1})),e(ra,{ref_key:"dataTable",ref:y,cashBoxId:B.value},null,8,["cashBoxId"])]}),_:1})]),_:1}),e(se,{modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=s=>M.value=s),"max-width":"500px",persistent:""},{default:a(()=>[M.value?(v(),p(q,{key:0,class:"pa-5"},{default:a(()=>[e(K,null,{default:a(()=>[e(x,{cols:"12"},{default:a(()=>[e(q,{class:"mx-auto pa-2","max-width":"500"},{default:a(()=>[e(xe,{modelValue:D.value,"onUpdate:modelValue":l[9]||(l[9]=s=>D.value=s)},{default:a(()=>[e(Q,{value:1},{default:a(()=>[e(x,{cols:"12",class:"text-center ma-0 pa-0"},{default:a(()=>[e(N,{class:"pa-1"},{default:a(()=>l[24]||(l[24]=[d("رصيدك الحالي")])),_:1}),e(N,{class:"pa-0"},{default:a(()=>{var s;return[d(c(((s=b.value)==null?void 0:s.balance)||0)+" ج",1)]}),_:1})]),_:1}),m.value?(v(),p(x,{key:0,cols:"12",class:"ma-0 pa-0"},{default:a(()=>[X.value?g("",!0):(v(),p(ee,{key:0,class:"py-1 my-3",border:"start",type:"warning",variant:"outlined"},{default:a(()=>{var s;return[d(c(m.value.nickname)+" ليس لديه خزنة من النوع "+c((s=b.value)==null?void 0:s.cash_type)+"، الرجاء اختيار خزنة أخرى. ",1)]}),_:1}))]),_:1})):g("",!0),e(x,{cols:"12"},{default:a(()=>{var s,j;return[(j=(s=m.value)==null?void 0:s.cashBoxes)!=null&&j.length?(v(),p(oe,{key:0,rounded:"",label:"الخزنة المحول إليها",modelValue:I.value,"onUpdate:modelValue":l[6]||(l[6]=_=>I.value=_),items:m.value.cashBoxes,"item-value":"id","item-title":"name"},null,8,["modelValue","items"])):(v(),p(ee,{key:1,type:"info",variant:"outlined",class:"my-3"},{default:a(()=>l[25]||(l[25]=[d(" المستخدم المحدد ليس لديه خزائن متاحة للتحويل إليها. ")])),_:1}))]}),_:1}),e(x,{cols:"12",class:"ma-0 pa-0"},{default:a(()=>{var s;return[Number(((s=b.value)==null?void 0:s.balance)||0)<Number(w.value)?(v(),p(ee,{key:0,class:"py-1 my-3",border:"start",type:"error",variant:"outlined"},{default:a(()=>l[26]||(l[26]=[d(" الرصيد الحالي لا يكفي لإتمام هذا التحويل. ")])),_:1})):g("",!0)]}),_:1}),e(x,{cols:"12"},{default:a(()=>[e(J,{modelValue:w.value,"onUpdate:modelValue":l[7]||(l[7]=s=>w.value=s),type:"Number",label:"المبلغ",rounded:"",placeholder:"ادخل المبلغ المراد تحويله"},null,8,["modelValue"])]),_:1}),e(x,{cols:"12"},{default:a(()=>[e(J,{modelValue:P.value,"onUpdate:modelValue":l[8]||(l[8]=s=>P.value=s),label:"الوصف",rounded:"",placeholder:"ادخل ملاحظة او وصف او سبب للتحويل (اختياري)"},null,8,["modelValue"])]),_:1})]),_:1}),e(Q,{value:2},{default:a(()=>[e(x,{cols:"12",class:"text-center"},{default:a(()=>[e(N,{class:"pa-0"},{default:a(()=>l[27]||(l[27]=[d("تحويل مبلغ")])),_:1}),e(te,{class:"pa-0 text-h5"},{default:a(()=>[d(c(w.value)+" ج",1)]),_:1}),e(N,{class:"pa-0"},{default:a(()=>[d("من "+c(F(k).user.nickname),1)]),_:1}),e(N,{class:"pa-0"},{default:a(()=>{var s;return[d("إلى "+c((s=m.value)==null?void 0:s.nickname),1)]}),_:1}),I.value?(v(),p(N,{key:0,class:"pa-0"},{default:a(()=>[d("لخزنة: "+c(I.value.name),1)]),_:1})):g("",!0),P.value?(v(),p(N,{key:1,class:"pa-0"},{default:a(()=>[d("ملاحظة: "+c(P.value),1)]),_:1})):g("",!0)]),_:1})]),_:1}),e(Q,{value:3},{default:a(()=>[n("div",va,[e(me,{color:"success",size:"60"},{default:a(()=>l[28]||(l[28]=[d("ri-checkbox-circle-fill")])),_:1}),l[29]||(l[29]=n("p",{class:"mt-2 text-h6"},"تم التحويل بنجاح!",-1))])]),_:1})]),_:1},8,["modelValue"]),e(H,null,{default:a(()=>[D.value>1&&D.value<3?(v(),p(h,{key:0,class:"mx-10",variant:"text",onClick:l[10]||(l[10]=s=>D.value--)},{default:a(()=>l[30]||(l[30]=[d(" السابق ")])),_:1})):g("",!0),e(Z),D.value===1?(v(),p(h,{key:1,class:"mx-10",disabled:G.value,variant:"text",color:"primary",onClick:l[11]||(l[11]=s=>D.value++)},{default:a(()=>l[31]||(l[31]=[d(" التالي ")])),_:1},8,["disabled"])):g("",!0),D.value===2?(v(),p(h,{key:2,class:"mx-10",variant:"text",color:"primary",onClick:ye},{default:a(()=>l[32]||(l[32]=[d(" تأكيد التحويل ")])),_:1})):g("",!0)]),_:1})]),_:1})]),_:1}),e(H,null,{default:a(()=>[e(h,{text:"إغلاق","prepend-icon":"ri-close-line",onClick:Ve})]),_:1})]),_:1})]),_:1})):g("",!0)]),_:1},8,["modelValue"]),e(se,{modelValue:z.value,"onUpdate:modelValue":l[17]||(l[17]=s=>z.value=s),"max-width":"500px",persistent:""},{default:a(()=>[e(q,null,{default:a(()=>[d(c(f.value)+" ",1),e(te,{class:"text-h6"},{default:a(()=>l[33]||(l[33]=[d("إضافة خزنة جديدة")])),_:1}),e(N,null,{default:a(()=>[e(J,{class:"my-2",modelValue:f.value.name,"onUpdate:modelValue":l[13]||(l[13]=s=>f.value.name=s),label:"اسم الخزنة",required:""},null,8,["modelValue"]),e(oe,{class:"my-2",modelValue:f.value.cash_box_type_id,"onUpdate:modelValue":l[14]||(l[14]=s=>f.value.cash_box_type_id=s),"item-value":"id",items:t.value,label:"نوع الخزنة",required:""},null,8,["modelValue","items"]),e(J,{class:"my-2",modelValue:f.value.description,"onUpdate:modelValue":l[15]||(l[15]=s=>f.value.description=s),label:"وصف الخزنة"},null,8,["modelValue"]),e(J,{class:"my-2",modelValue:f.value.account_number,"onUpdate:modelValue":l[16]||(l[16]=s=>f.value.account_number=s),label:"رقم الحساب او المحفظة"},null,8,["modelValue"])]),_:1}),e(H,null,{default:a(()=>[e(Z),e(h,{color:"grey",onClick:ve,disabled:i.value},{default:a(()=>l[34]||(l[34]=[d("إلغاء")])),_:1},8,["disabled"]),e(h,{color:"primary",onClick:ke,loading:i.value,disabled:!f.value.name||!f.value.cash_box_type_id},{default:a(()=>l[35]||(l[35]=[d("حفظ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},ma=Ue(ca,[["__scopeId","data-v-2e635d0d"]]);export{ma as default};
