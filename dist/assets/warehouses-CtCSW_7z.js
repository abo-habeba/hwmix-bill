import{r as i,P as z,k as x,j as l,aI as E,ap as O,o as c,d as a,b as o,a9 as s,ah as y,M as j,a4 as w,c as H,A as L,a5 as r,C as P,a as R,t as k,Y as _,a3 as D,F as X,W as Y,q as Z,U as C,a1 as U,a6 as f,az as G,au as W,X as A,$ as v,Z as I,aH as J}from"./index-ChaltJ_Z.js";const K={class:"text-lg fw-medium"},ee={__name:"warehouses",setup(Q){const d=i(!1),m=i(!1),b=i(null),t=i({name:"",location:"",manager_name:"",capacity:null,status:"active",company_id:"",created_by:""}),p=i([]),B=i([{name:"نشط",value:"active"},{name:"غير نشط",value:"inactive"}]);function $(){t.value={name:"",location:"",manager_name:"",capacity:null,status:"active"},d.value=!0}function N(){d.value=!1,t.value={name:"",location:"",manager_name:"",capacity:null,status:"active"}}function T(){var u;if(!t.value.name){v.error("اسم المخزن مطلوب");return}let n={id:(u=t.value)==null?void 0:u.id,name:t.value.name,location:t.value.location,manager_name:t.value.manager_name,capacity:t.value.capacity,status:t.value.status,company_id:t.value.company_id,created_by:t.value.created_by};const e=!!t.value.id;I("warehouse",n,t.value.id,!1,!0,!0).then(()=>{V(),d.value=!1,v.success(e?"تم تعديل المخزن بنجاح":"تم حفظ المخزن بنجاح"),t.value={name:"",location:"",manager_name:"",capacity:null,status:"active"}}).catch(g=>{const S=g||(e?"حدث خطأ أثناء تعديل المخزن":"حدث خطأ أثناء حفظ المخزن");v.error(S)})}function q(n){b.value=n,m.value=!0}function F(n){J("warehouse/delete",n,!0,!0).then(()=>{V(),m.value=!1,v.success("تم حذف المخزن بنجاح")}).catch(e=>{v.error(e)})}function M(n){t.value={...n},d.value=!0}function V(){O("warehouses",{per_page:-1}).then(n=>{p.value=n})}return z(()=>{V()}),(n,e)=>(c(),x(E,null,{default:l(()=>[a(s,{"prepend-icon":"ri-add-line",color:"primary",onClick:$},{default:l(()=>e[9]||(e[9]=[o("اضافة مخزن جديد")])),_:1}),a(C,{class:"mt-4 pa-3"},{default:l(()=>[a(y,null,{default:l(()=>e[10]||(e[10]=[o("المخازن")])),_:1}),a(j,{class:"ma-1"}),a(w,{class:"flex-wrap ma-2",style:{gap:"16px"}},{default:l(()=>[(c(!0),H(X,null,L(p.value,u=>(c(),x(r,{key:u.id,cols:"12",sm:"auto",class:"d-flex align-center elevation-2 pa-1 rounded",style:{background:"white","min-width":"280px"}},{default:l(()=>[a(P,{variant:"text",icon:"ri-warehouse-line",color:"primary",size:"32",class:"me-3"}),R("div",K,k(u.name),1),a(_),a(s,{icon:"ri-edit-line",variant:"text",color:"success",onClick:D(g=>M(u),["stop"]),title:"تعديل المخزن",class:"mx-1"},null,8,["onClick"]),a(s,{icon:"ri-delete-bin-line",variant:"text",color:"error",onClick:D(g=>q(u.id),["stop"]),title:"حذف المخزن",class:"mx-1"},null,8,["onClick"])]),_:2},1024))),128)),p.value.length===0?(c(),x(r,{key:0,cols:"12"},{default:l(()=>[a(Y,{type:"info",border:"start",class:"text-center"},{default:l(()=>e[11]||(e[11]=[o(" لا توجد مخازن حتى الآن ")])),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1}),a(A,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=u=>d.value=u),"max-width":"500px"},{default:l(()=>[a(C,null,{default:l(()=>[a(y,null,{default:l(()=>[o(k(t.value.id?"تعديل المخزن":"اضافة مخزن جديد"),1)]),_:1}),a(U,null,{default:l(()=>[a(w,{dense:""},{default:l(()=>[a(r,{cols:"12"},{default:l(()=>[a(f,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.name=u),label:"اسم المخزن",rules:[u=>!!u||"اسم المخزن مطلوب"],required:""},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:l(()=>[a(f,{modelValue:t.value.location,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.location=u),label:"الموقع"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:l(()=>[a(f,{modelValue:t.value.manager_name,"onUpdate:modelValue":e[2]||(e[2]=u=>t.value.manager_name=u),label:"اسم المدير"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:l(()=>[a(f,{modelValue:t.value.capacity,"onUpdate:modelValue":e[3]||(e[3]=u=>t.value.capacity=u),label:"السعة",type:"number"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12"},{default:l(()=>[a(G,{modelValue:t.value.status,"onUpdate:modelValue":e[4]||(e[4]=u=>t.value.status=u),"item-value":"value","item-title":"name",items:B.value,label:"الحالة",required:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),a(W,null,{default:l(()=>[a(_),a(s,{color:"blue darken-1",text:"",onClick:N},{default:l(()=>e[12]||(e[12]=[o("الغاء")])),_:1}),a(s,{color:"blue darken-1",text:"",onClick:T},{default:l(()=>[o(k(t.value.id?"تعديل":"حفظ"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(A,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=u=>m.value=u),"max-width":"400px"},{default:l(()=>[a(C,null,{default:l(()=>[a(y,null,{default:l(()=>e[13]||(e[13]=[o("تأكيد الحذف")])),_:1}),a(U,null,{default:l(()=>e[14]||(e[14]=[o("هل أنت متأكد من حذف هذا المخزن؟")])),_:1}),a(W,null,{default:l(()=>[a(_),a(s,{color:"grey darken-1",text:"",onClick:e[6]||(e[6]=u=>m.value=!1)},{default:l(()=>e[15]||(e[15]=[o("الغاء")])),_:1}),a(s,{color:"red darken-1",text:"",onClick:e[7]||(e[7]=u=>F(b.value))},{default:l(()=>e[16]||(e[16]=[o("حذف")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ee as default};
