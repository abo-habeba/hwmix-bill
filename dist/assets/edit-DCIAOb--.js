import{_ as U,S as x,r as m,A as w,Q as C,ar as k,l as I,k as a,W as c,g as R,o as v,d as e,a6 as t,u as B,N as D,a2 as F,a3 as N,a5 as f,a7 as r,c as h,E,s as P,as as S,aa as T,b as A,h as W,$ as j,a0 as q}from"./index-Dv1TzYd-.js";const L={key:0},M={__name:"edit",setup(O){x();const i=R(),V=W(),p=m(!1),g=m(i.params.id),_=w(),d=m(null),n=m(null),y=()=>{if(d.value&&d.value.type.startsWith("image/")){const u=new FileReader;u.onload=l=>{n.value=l.target.result},u.readAsDataURL(d.value)}else n.value=null},o=m({});C(()=>{i.params.id&&(p.value=!0,k("company",g.value,!0).then(u=>{o.value=u,console.log(" company.value.logo",u.logo),n.value=u.logo,console.log("imagePreview",n)}).finally(u=>{p.value=!1}))});function b(){const u={...o.value};d.value?u.logo=d.value:delete u.logo,j("company",u,i.params.id).then(l=>{_.fetchUser(),V.go(-1)}).catch(l=>{console.error("Error saving company:",l),q.error("حدث خطأ أثناء حفظ الشركة")})}return(u,l)=>(v(),I(c,null,{default:a(()=>[e(f,null,{default:a(()=>[e(t,{cols:"12"},{default:a(()=>[e(c,{elevation:"0",loading:p.value,title:B(i).params.id?"تعديل الشركة":"اضافة شركة",class:"ma-4"},{default:a(()=>[e(D),e(F,null,{default:a(()=>[e(N,{class:"mt-6"},{default:a(()=>[e(f,null,{default:a(()=>[e(t,{sm:"6",md:"4",cols:"12"},{default:a(()=>[e(r,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value.name=s),label:" اسم الشركة "},null,8,["modelValue"])]),_:1}),e(t,{sm:"6",md:"4",cols:"12"},{default:a(()=>[e(r,{modelValue:o.value.field,"onUpdate:modelValue":l[1]||(l[1]=s=>o.value.field=s),label:" التخصص  "},null,8,["modelValue"])]),_:1}),e(t,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(r,{required:"",modelValue:o.value.email,"onUpdate:modelValue":l[2]||(l[2]=s=>o.value.email=s),label:"الايميل",placeholder:"johndoe@gmail.com",type:"email"},null,8,["modelValue"])]),_:1}),e(t,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(r,{modelValue:o.value.phone,"onUpdate:modelValue":l[3]||(l[3]=s=>o.value.phone=s),label:" رقم الهاتف ",placeholder:"0123456789"},null,8,["modelValue"])]),_:1}),e(t,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(r,{modelValue:o.value.description,"onUpdate:modelValue":l[4]||(l[4]=s=>o.value.description=s),label:" وصف  ",placeholder:"نبذه عن الشركة ومجالها"},null,8,["modelValue"])]),_:1}),e(t,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(r,{modelValue:o.value.address,"onUpdate:modelValue":l[5]||(l[5]=s=>o.value.address=s),label:" العنوان  ",placeholder:"عنوان الشركة"},null,8,["modelValue"])]),_:1}),e(t,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(t,{cols:"12",md:"6"},{default:a(()=>[n.value?(v(),h("div",L,[e(E,{src:n.value,class:"mb-2","aspect-ratio":"1",cover:""},null,8,["src"])])):P("",!0)]),_:1}),e(t,{cols:"12"},{default:a(()=>[e(S,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=s=>d.value=s),label:"اختر شعار","prepend-icon":"ri-image-add-fill",accept:"image/*",chips:"",placeholder:"اختر شعار للشركة",onChange:y},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(T,{onClick:b},{default:a(()=>l[7]||(l[7]=[A(" حفظ ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","title"])]),_:1})]),_:1})]),_:1}))}},$=U(M,[["__scopeId","data-v-1357ba2a"]]);export{$ as default};
