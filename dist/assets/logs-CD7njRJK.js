import{_ as V,o as g,m as y,a2 as A,r as t,Q as D,ag as E,ah as T,c as U,d as r,ai as $,n as x,a8 as z,X as F}from"./index--_kej0aQ.js";import{_ as I}from"./ContextMenu-aAcySCSW.js";const L={};function N(v,n){return g(),y(A,{class:"text-center btn-add",density:"compact",variant:"flat",style:{"background-color":"#28a745 !important",color:"white","z-index":"10"},"prepend-icon":"ri-add-line",to:{name:"edit-user"}})}const O=V(L,[["render",N],["__scopeId","data-v-c000a4ad"]]),Q={id:"dataTable",style:{position:"relative !important","white-space":"nowrap"}},R={__name:"DataTable",setup(v){t([]);const n=t(0),u=t([]),i=t(null),m=t(!1),f=t(10),k=t({nickname:"",phone:"",status:"",created_at_from:"",created_at_to:""}),d=t({page:1,sortBy:[],itemsPerPage:10}),w=t([{title:"#",key:"id",align:"center"},{title:"الحدث",key:"description",align:"center"},{title:"الاجراء",key:"action",align:"center"},{title:"المتصفح",key:"user_agent",align:"center"},{title:"تاريخ الانشاء",key:"created_at",align:"center"},{title:"ip",key:"ip_address",align:"center"},{title:"الرابط",key:"url",align:"center"}]);D(()=>{h()});const p=t([]),_=t([]);E(()=>{_.value.length===0?p.value=[{title:"لا تملك إجراءات",color:"#6c757d",icon:"ri-spam-3-line",callback:()=>{}}]:p.value=_.value});const s=t(null),C=(o,{item:e})=>{i.value=e,console.log("log.value",i.value),console.log("availableActions.value",_.value),o.preventDefault(),s.value&&s.value.showContextMenu(o)},P=()=>{s.value?s.value.colsContextMenu():console.error("Context menu is not initialized.")};async function h(){const{page:o,itemsPerPage:e,sortBy:a}=d.value,l=a.length?a[0].key:"id",M=a.length&&a[0].order?a[0].order:"desc",B=e===-1?n.value:e;try{const c=await T("logs",{page:o,per_page:B,sort_by:l,sort_order:M,...k.value});u.value=c.data,n.value=c.total}catch(c){console.error("Error fetching logs:",c)}finally{m.value=!1}}function b({item:o,index:e}){return{class:e%2!==0?"active-row":"","data-index":e}}return(o,e)=>{const a=I;return g(),U("div",Q,[r($,{"item-value":"id","items-per-page":f.value,"onUpdate:itemsPerPage":e[0]||(e[0]=l=>f.value=l),options:d.value,"onUpdate:options":[e[1]||(e[1]=l=>d.value=l),h],headers:w.value,items:u.value,"items-length":n.value,loading:m.value,hover:"","show-current-page":"","row-props":b,"loading-text":" جاري تحمل البيانات ","no-data-text":" لا توجد بيانات ","items-per-page-text":"عدد الصفوف في الصفحة","onContextmenu:row":C,onClick:P},null,8,["items-per-page","options","headers","items","items-length","loading"]),r(a,{ref_key:"contextMenu",ref:s,actions:p.value},null,8,["actions"])])}}},j={__name:"logs",setup(v){return(n,u)=>{const i=O;return g(),y(z,{style:{position:"relative"},cols:"12"},{default:x(()=>[r(F,{class:"pa-0",title:"سجل النظام"},{default:x(()=>[r(R)]),_:1}),r(i)]),_:1})}}};export{j as default};
