import{aN as E,aO as ae,aP as re,aQ as R,r as y,j as k,aR as O,aS as K,d as l,F,aT as oe,aJ as D,aU as de,aV as ce,aW as ve,aX as fe,aY as me,aZ as ge,I as j,y as pe,a_ as Ve,a$ as be,J as q,a2 as G,b0 as z,L as he,M as Ie,s as we,b1 as Ce,an as N,b2 as ke,b3 as ye,b4 as Te,g as C,b5 as H,b6 as xe,b7 as Pe,b8 as Se,H as J,Q as Ae,m as Q,n as h,ay as Le,ah as De,o as W,b as L,aa as X,N as Ge,u as _e,V as Z,t as Y,v as $e,X as ee,a1 as Fe,al as Be,aH as Ee,aq as Re,$ as Ne,Z as Oe,a0 as Ue,aE as Me}from"./index-C5ezxwXk.js";const Ke=E({...ae(re({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),te=R()({name:"VTreeviewGroup",props:Ke(),setup(e,b){let{slots:c}=b;const t=y(),m=k(()=>{var v;return(v=t.value)!=null&&v.isOpen?e.collapseIcon:e.expandIcon}),w=k(()=>{var v;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(v=t.value)==null?void 0:v.isOpen,toggleIcon:m.value}}});return O(()=>{const v=K.filterProps(e);return l(K,D(v,{ref:t,class:["v-treeview-group",e.class],subgroup:!0}),{...c,activator:c.activator?r=>l(F,null,[l(oe,{defaults:w.value},{default:()=>{var f;return[(f=c.activator)==null?void 0:f.call(c,r)]}})]):void 0})}),{}}}),ne=Symbol.for("vuetify:v-treeview"),je=E({loading:Boolean,toggleIcon:de,...ce({slim:!0})},"VTreeviewItem"),le=R()({name:"VTreeviewItem",props:je(),setup(e,b){let{attrs:c,slots:t,emit:m}=b;const w=ve(e,c),v=k(()=>e.value===void 0?w.href.value:e.value),r=y(),{activate:f,isActivated:p,select:I,isSelected:g,isIndeterminate:n,isGroupActivator:a,root:o,id:d}=fe(v,!1),T=k(()=>o.activatable.value&&a),{densityClasses:x}=me(e,"v-list-item"),s=k(()=>({isActive:p.value,select:I,isSelected:g.value,isIndeterminate:n.value})),i=k(()=>{var V;return!e.disabled&&e.link!==!1&&(e.link||w.isClickable.value||e.value!=null&&!!((V=r.value)!=null&&V.list))});function u(V){var _,$;!i.value||!T.value&&a||o.activatable.value&&(T.value?f(!p.value,V):($=r.value)==null||$.activate(!((_=r.value)!=null&&_.isActivated),V))}function P(V){(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),u(V))}const S=ge(ne,{visibleIds:y()}).visibleIds;return O(()=>{var U;const V=t.title||e.title!=null,_=t.subtitle||e.subtitle!=null,$=j.filterProps(e),ue=t.prepend||e.toggleIcon;return T.value?pe(l("div",{class:["v-list-item","v-list-item--one-line","v-treeview-item","v-treeview-item--activetable-group-activator",{"v-list-item--active":p.value||g.value,"v-treeview-item--filtered":S.value&&!S.value.has(d.value)},x.value,e.class],onClick:u},[l(F,null,[be(p.value||g.value,"v-list-item"),e.toggleIcon&&l(q,{start:!1},{default:()=>[l(G,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:e.onClick},{loader(){return l(z,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]})]),l("div",{class:"v-list-item__content","data-no-activator":""},[V&&l(he,{key:"title"},{default:()=>{var A;return[((A=t.title)==null?void 0:A.call(t,{title:e.title}))??e.title]}}),_&&l(Ie,{key:"subtitle"},{default:()=>{var A;return[((A=t.subtitle)==null?void 0:A.call(t,{subtitle:e.subtitle}))??e.subtitle]}}),(U=t.default)==null?void 0:U.call(t,s.value)])]),[[Ve("ripple"),i.value&&e.ripple]]):l(j,D({ref:r},$,{class:["v-treeview-item",{"v-treeview-item--filtered":S.value&&!S.value.has(d.value)},e.class],value:d.value,onClick:u,onKeydown:i.value&&P}),{...t,prepend:ue?A=>{var M;return l(F,null,[e.toggleIcon&&l(q,{start:!1},{default:()=>[l(G,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text"},{loader(){return l(z,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]}),(M=t.prepend)==null?void 0:M.call(t,A)])}:void 0})}),{}}}),ie=E({loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,selectable:Boolean,selectStrategy:[String,Function,Object]},"VTreeviewChildren"),B=R()({name:"VTreeviewChildren",props:ie(),setup(e,b){let{emit:c,slots:t}=b;const m=we(null);function w(r){return new Promise(f=>{var p,I;if(!((p=e.items)!=null&&p.length)||!e.loadChildren)return f();if(((I=r==null?void 0:r.children)==null?void 0:I.length)===0){m.value=r.value,e.loadChildren(r).then(f);return}f()}).finally(()=>{m.value=null})}function v(r,f){e.selectable&&r(!f)}return()=>{var r,f;return((r=t.default)==null?void 0:r.call(t))??((f=e.items)==null?void 0:f.map(p=>{var x;let{children:I,props:g,raw:n}=p;const a=m.value===n.value,o={prepend:s=>{var i;return l(F,null,[e.selectable&&(!I||I&&!["leaf","single-leaf"].includes(e.selectStrategy))&&l("div",null,[l(Ce,{key:n.value,modelValue:s.isSelected,loading:a,indeterminate:s.isIndeterminate,onClick:N(()=>v(s.select,s.isSelected),["stop"]),onKeydown:u=>{["Enter","Space"].includes(u.key)&&(u.stopPropagation(),v(s.select,s.isSelected))}},null)]),(i=t.prepend)==null?void 0:i.call(t,{...s,item:n})])},append:t.append?s=>{var i;return(i=t.append)==null?void 0:i.call(t,{...s,item:n})}:void 0,title:t.title?s=>{var i;return(i=t.title)==null?void 0:i.call(t,{...s,item:n})}:void 0},d=te.filterProps(g),T=B.filterProps(e);return I?l(te,D({value:g==null?void 0:g.value},d),{activator:s=>{let{props:i}=s;const u={...g,...i,value:g==null?void 0:g.value};return l(le,D(u,{loading:a,onClick:()=>w(n)}),o)},default:()=>l(B,D(T,{items:I}),t)}):((x=t.item)==null?void 0:x.call(t,{props:g}))??l(le,g,o)}))}}});function se(e){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const c of e)b.push(c),c.children&&se(c.children,b);return b}const qe=E({openAll:Boolean,search:String,...ke({filterKeys:["title"]}),...ie(),...ae(ye({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav"])},"VTreeview"),ze=R()({name:"VTreeview",props:qe(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,b){let{slots:c}=b;const{items:t}=Te(e),m=C(e,"activeColor"),w=C(e,"baseColor"),v=C(e,"color"),r=H(e,"activated"),f=H(e,"selected"),p=y(),I=k(()=>e.openAll?x(t.value):e.opened),g=k(()=>se(t.value)),n=C(e,"search"),{filteredItems:a}=xe(e,g,n),o=k(()=>n.value?new Set(a.value.flatMap(s=>[...d(s.props.value),...T(s.props.value)])):null);function d(s){var P;const i=[];let u=s;for(;u!=null;)i.unshift(u),u=(P=p.value)==null?void 0:P.parents.get(u);return i}function T(s){var P,S;const i=[],u=(((P=p.value)==null?void 0:P.children.get(s))??[]).slice();for(;u.length;){const V=u.shift();V&&(i.push(V),u.push(...(((S=p.value)==null?void 0:S.children.get(V))??[]).slice()))}return i}function x(s){let i=[];for(const u of s)u.children&&(i.push(u.value),u.children&&(i=i.concat(x(u.children))));return i}return Pe(ne,{visibleIds:o}),Se({VTreeviewGroup:{activeColor:m,baseColor:w,color:v,collapseIcon:C(e,"collapseIcon"),expandIcon:C(e,"expandIcon")},VTreeviewItem:{activeClass:C(e,"activeClass"),activeColor:m,baseColor:w,color:v,density:C(e,"density"),disabled:C(e,"disabled"),lines:C(e,"lines"),variant:C(e,"variant")}}),O(()=>{const s=J.filterProps(e),i=B.filterProps(e);return l(J,D({ref:p},s,{class:["v-treeview",e.class],style:e.style,opened:I.value,activated:r.value,"onUpdate:activated":u=>r.value=u,selected:f.value,"onUpdate:selected":u=>f.value=u}),{default:()=>[l(B,D(i,{items:t.value}),c)]})}),{open}}}),Je={__name:"Categories",setup(e){const b=y([]),c=y([]),t=y(!1),m=y({name:"",description:"",parent_id:null});function w(n){const a={};n.forEach(d=>{d.children=d.children||[],a[d.id]=d});const o=[];return n.forEach(d=>{d.parent_id?a[d.parent_id]&&a[d.parent_id].children.push(d):o.push(d)}),o}function v(){De("categories").then(n=>{b.value=n.data,console.log(b.value),c.value=w(b.value),console.log(c.value)})}const r=n=>({expandIcon:n.children&&n.children.length?"ri-add-line":"ri-checkbox-blank-circle-line",collapseIcon:n.children&&n.children.length?"ri-subtract-line":"ri-checkbox-blank-circle-line"});Ae(()=>{v()});function f(n){n?m.value.parent_id=n.id:m.value.parent_id=null,t.value=!0}function p(){t.value=!1,m.value={name:"",description:"",parent_id:null}}function I(){Ue("category",m.value,!1,!0,!0).then(()=>{v(),p()})}function g(n){confirm("هل أنت متأكد من حذف هذه الفئة؟")&&Me("category",n).then(()=>{v()})}return(n,a)=>(W(),Q(Le,null,{default:h(()=>[l(G,{color:"primary",class:"mb-4",onClick:a[0]||(a[0]=o=>f(null))},{default:h(()=>a[4]||(a[4]=[L("اضافة فئة رئيسية جديدة")])),_:1}),l(ee,{class:"mt-4 pa-3",outlined:""},{default:h(()=>[l(X,null,{default:h(()=>a[5]||(a[5]=[L("الفئات الهرمية")])),_:1}),l(Ge),c.value.length?(W(),Q(_e(ze),{key:0,items:c.value,"item-title":"name","item-value":"id","open-on-click":"","item-props":r,class:"treeview-border ma-auto","max-width":"500px"},{append:h(({item:o})=>[l(Z,{small:"",class:"ma-3",onClick:N(d=>f(o),["stop"])},{default:h(()=>a[6]||(a[6]=[L(Y("ri-add-line"))])),_:2},1032,["onClick"]),l(Z,{class:"ma-3",small:"",color:"red",onClick:N(d=>g(o.id),["stop"])},{default:h(()=>a[7]||(a[7]=[L(Y("ri-delete-bin-6-line"))])),_:2},1032,["onClick"])]),_:1},8,["items"])):$e("",!0)]),_:1}),l(Oe,{modelValue:t.value,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value=o),"max-width":"500px"},{default:h(()=>[l(ee,null,{default:h(()=>[l(X,null,{default:h(()=>a[8]||(a[8]=[L("اضافة فئة جديدة")])),_:1}),l(Fe,null,{default:h(()=>[l(Be,{class:"pa-2",modelValue:m.value.name,"onUpdate:modelValue":a[1]||(a[1]=o=>m.value.name=o),label:"اسم الفئة",required:""},null,8,["modelValue"]),l(Ee,{class:"pa-2",modelValue:m.value.description,"onUpdate:modelValue":a[2]||(a[2]=o=>m.value.description=o),label:"الوصف"},null,8,["modelValue"])]),_:1}),l(Re,null,{default:h(()=>[l(Ne),l(G,{text:"",onClick:p},{default:h(()=>a[9]||(a[9]=[L("الغاء")])),_:1}),l(G,{text:"",color:"blue darken-1",onClick:I},{default:h(()=>a[10]||(a[10]=[L("حفظ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Je as default};
