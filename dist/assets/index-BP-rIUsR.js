import{P as Io,r as W,w as tt,Q as er,b9 as Fo,j as St,o as ce,c as ot,a as ee,az as Vo,y as Uo,z as Wo,A as Lo,ah as nt,aj as Ho,m as Fe,n as E,d as S,aa as tr,V as Ie,b as H,t as re,ad as jr,v as it,N as No,a1 as zr,ak as Bo,an as qo,a7 as Tt,a8 as rt,ba as Xt,a2 as Oe,Z as Mt,X as xt,u as zo,Y as Go,ac as Gr,al as Rr,aq as Jr,$ as Kt,a0 as Jo,_ as Yo,aE as Qo,H as Xo,I as Ee,aK as Ko,F as Zo,C as ei}from"./index-C5ezxwXk.js";var Yr=(r,o,a)=>{if(!o.has(r))throw TypeError("Cannot "+a)},Ir=(r,o,a)=>(Yr(r,o,"read from private field"),a?a.call(r):o.get(r)),ti=(r,o,a)=>{if(o.has(r))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(r):o.set(r,a)},ri=(r,o,a,u)=>(Yr(r,o,"write to private field"),o.set(r,a),a);const Qr=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],ni=[...Qr,["unknown"]].map(r=>r[0]),Pt=new Map(Qr);function ai(r){for(const[o,a]of Pt)if(r===a)return o;return"unknown"}function oi(r){if(Xr(r))return{width:r.naturalWidth,height:r.naturalHeight};if(Kr(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(Zr(r))return{width:r.videoWidth,height:r.videoHeight};if(tn(r))return{width:r.width,height:r.height};if(nn(r))return{width:r.displayWidth,height:r.displayHeight};if(en(r))return{width:r.width,height:r.height};if(rn(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Xr(r){try{return r instanceof HTMLImageElement}catch{return!1}}function Kr(r){try{return r instanceof SVGImageElement}catch{return!1}}function Zr(r){try{return r instanceof HTMLVideoElement}catch{return!1}}function en(r){try{return r instanceof HTMLCanvasElement}catch{return!1}}function tn(r){try{return r instanceof ImageBitmap}catch{return!1}}function rn(r){try{return r instanceof OffscreenCanvas}catch{return!1}}function nn(r){try{return r instanceof VideoFrame}catch{return!1}}function an(r){try{return r instanceof Blob}catch{return!1}}function ii(r){try{return r instanceof ImageData}catch{return!1}}function si(r,o){try{const a=new OffscreenCanvas(r,o);if(a.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return a;throw void 0}catch{const u=document.createElement("canvas");return u.width=r,u.height=o,u}}async function on(r){if(Xr(r)&&!await di(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Kr(r)&&!await fi(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(nn(r)&&vi(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Zr(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(tn(r)&&mi(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:o,height:a}=oi(r);if(o===0||a===0)return null;const u=si(o,a).getContext("2d");u.drawImage(r,0,0);try{return u.getImageData(0,0,o,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ui(r){let o;try{if(globalThis.createImageBitmap)o=await createImageBitmap(r);else if(globalThis.Image){o=new Image;let a="";try{a=URL.createObjectURL(r),o.src=a,await o.decode()}finally{URL.revokeObjectURL(a)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await on(o)}function li(r){const{width:o,height:a}=r;if(o===0||a===0)return null;const u=r.getContext("2d");try{return u.getImageData(0,0,o,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ci(r){if(an(r))return await ui(r);if(ii(r)){if(pi(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return en(r)||rn(r)?li(r):await on(r)}async function di(r){try{return await r.decode(),!0}catch{return!1}}async function fi(r){var o;try{return await((o=r.decode)==null?void 0:o.call(r)),!0}catch{return!1}}function vi(r){return r.format===null}function pi(r){return r.data.buffer.byteLength===0}function mi(r){return r.width===0&&r.height===0}function Fr(r,o){return r instanceof DOMException?new DOMException(`${o}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${o}: ${r.message}`):new Error(`${o}: ${r}`)}const Vr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function hi(r){return r.join("|")}function yi(r){const o=Ur(r);let a=0,u=Vr.length-1;for(;a<=u;){const l=Math.floor((a+u)/2),p=Vr[l],y=Ur(p);if(y===o)return p;y<o?a=l+1:u=l-1}return"None"}function Ur(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function gi(r,o){return r.Binarizer[o]}function wi(r,o){return r.CharacterSet[o]}const bi=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ci(r){return bi[r.value]}function _i(r,o){return r.EanAddOnSymbol[o]}function Ti(r,o){return r.TextMode[o]}const Be={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function sn(r,o){return{...o,formats:hi(o.formats),binarizer:gi(r,o.binarizer),eanAddOnSymbol:_i(r,o.eanAddOnSymbol),textMode:Ti(r,o.textMode),characterSet:wi(r,o.characterSet)}}function un(r){return{...r,format:yi(r.format),eccLevel:r.eccLevel,contentType:Ci(r.contentType)}}const $i={locateFile:(r,o)=>{const a=r.match(/_(.+?)\.wasm$/);return a?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${a[1]}/${r}`:o+r}};let Wr=new WeakMap;function rr(r,o){var a;const u=Wr.get(r);if(u!=null&&u.modulePromise&&o===void 0)return u.modulePromise;const l=(a=u==null?void 0:u.moduleOverrides)!=null?a:$i,p=r({...l});return Wr.set(r,{moduleOverrides:l,modulePromise:p}),p}async function Si(r,o,a=Be){const u={...Be,...a},l=await rr(r),{size:p}=o,y=new Uint8Array(await o.arrayBuffer()),T=l._malloc(p);l.HEAPU8.set(y,T);const v=l.readBarcodesFromImage(T,p,sn(l,u));l._free(T);const m=[];for(let w=0;w<v.size();++w)m.push(un(v.get(w)));return m}async function Pi(r,o,a=Be){const u={...Be,...a},l=await rr(r),{data:p,width:y,height:T,data:{byteLength:v}}=o,m=l._malloc(v);l.HEAPU8.set(p,m);const w=l.readBarcodesFromPixmap(m,y,T,sn(l,u));l._free(m);const C=[];for(let I=0;I<w.size();++I)C.push(un(w.get(I)));return C}({...Be,formats:[...Be.formats]});var nr=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(o={}){var a=o,u,l;a.ready=new Promise((e,t)=>{u=e,l=t});var p=Object.assign({},a),y="./this.program",T=typeof window=="object",v=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var m="";function w(e){return a.locateFile?a.locateFile(e,m):m+e}var C;(T||v)&&(v?m=self.location.href:typeof document<"u"&&document.currentScript&&(m=document.currentScript.src),r&&(m=r),m.indexOf("blob:")!==0?m=m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):m="",v&&(C=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),a.print||console.log.bind(console);var I=a.printErr||console.error.bind(console);Object.assign(a,p),p=null,a.arguments&&a.arguments,a.thisProgram&&(y=a.thisProgram),a.quit&&a.quit;var F;a.wasmBinary&&(F=a.wasmBinary),typeof WebAssembly!="object"&&z("no native wasm support detected");var R,L=!1,B,q,ie,U,A,k,de,fe;function _e(){var e=R.buffer;a.HEAP8=B=new Int8Array(e),a.HEAP16=ie=new Int16Array(e),a.HEAPU8=q=new Uint8Array(e),a.HEAPU16=U=new Uint16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU32=k=new Uint32Array(e),a.HEAPF32=de=new Float32Array(e),a.HEAPF64=fe=new Float64Array(e)}var Te=[],$e=[],Se=[];function Ve(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)ze(a.preRun.shift());At(Te)}function Ae(){At($e)}function qe(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)ke(a.postRun.shift());At(Se)}function ze(e){Te.unshift(e)}function Ge(e){$e.unshift(e)}function ke(e){Se.unshift(e)}var ue=0,P=null;function _(e){var t;ue++,(t=a.monitorRunDependencies)===null||t===void 0||t.call(a,ue)}function M(e){var t;if(ue--,(t=a.monitorRunDependencies)===null||t===void 0||t.call(a,ue),ue==0&&P){var n=P;P=null,n()}}function z(e){var t;(t=a.onAbort)===null||t===void 0||t.call(a,e),e="Aborted("+e+")",I(e),L=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw l(n),n}var ge="data:application/octet-stream;base64,",st=e=>e.startsWith(ge),Pe;Pe="zxing_reader.wasm",st(Pe)||(Pe=w(Pe));function ut(e){if(e==Pe&&F)return new Uint8Array(F);if(C)return C(e);throw"both async and sync fetching of the wasm failed"}function Dt(e){return!F&&(T||v)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>ut(e)):Promise.resolve().then(()=>ut(e))}function lt(e,t,n){return Dt(e).then(i=>WebAssembly.instantiate(i,t)).then(i=>i).then(n,i=>{I(`failed to asynchronously prepare wasm: ${i}`),z(i)})}function Sn(e,t,n,i){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!st(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var c=WebAssembly.instantiateStreaming(s,n);return c.then(i,function(d){return I(`wasm streaming compile failed: ${d}`),I("falling back to ArrayBuffer instantiation"),lt(t,n,i)})}):lt(t,n,i)}function Pn(){var e={a:po};function t(i,s){return te=i.exports,R=te.ia,_e(),vr=te.ma,Ge(te.ja),M(),te}_();function n(i){t(i.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(i){I(`Module.instantiateWasm callback failed with error: ${i}`),l(i)}return Sn(F,Pe,e,n).catch(l),{}}var At=e=>{for(;e.length>0;)e.shift()(a)};a.noExitRuntime;var ct=[],dt=0,En=e=>{var t=new kt(e);return t.get_caught()||(t.set_caught(!0),dt--),t.set_rethrown(!1),ct.push(t),Er(t.excPtr),t.get_exception_ptr()},we=0,xn=()=>{G(0,0);var e=ct.pop();Pr(e.excPtr),we=0};function kt(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){k[this.ptr+4>>2]=t},this.get_type=function(){return k[this.ptr+4>>2]},this.set_destructor=function(t){k[this.ptr+8>>2]=t},this.get_destructor=function(){return k[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,B[this.ptr+12>>0]=t},this.get_caught=function(){return B[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,B[this.ptr+13>>0]=t},this.get_rethrown=function(){return B[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n)},this.set_adjusted_ptr=function(t){k[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return k[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=Or(this.get_type());if(t)return k[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var On=e=>{throw we||(we=e),we},jt=e=>{var t=we;if(!t)return et(0),0;var n=new kt(t);n.set_adjusted_ptr(t);var i=n.get_type();if(!i)return et(0),t;for(var s in e){var c=e[s];if(c===0||c===i)break;var d=n.ptr+16;if(xr(c,i,d))return et(c),t}return et(i),t},Mn=()=>jt([]),Dn=e=>jt([e]),An=(e,t)=>jt([e,t]),kn=()=>{var e=ct.pop();e||z("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(ct.push(e),e.set_rethrown(!0),e.set_caught(!1),dt++),we=t,we},jn=(e,t,n)=>{var i=new kt(e);throw i.init(t,n),we=e,dt++,we},Rn=()=>dt,ft={},Rt=e=>{for(;e.length;){var t=e.pop(),n=e.pop();n(t)}};function It(e){return this.fromWireType(A[e>>2])}var Ue={},je={},vt={},ar,pt=e=>{throw new ar(e)},Re=(e,t,n)=>{e.forEach(function(f){vt[f]=t});function i(f){var h=n(f);h.length!==e.length&&pt("Mismatched type converter count");for(var b=0;b<e.length;++b)pe(e[b],h[b])}var s=new Array(t.length),c=[],d=0;t.forEach((f,h)=>{je.hasOwnProperty(f)?s[h]=je[f]:(c.push(f),Ue.hasOwnProperty(f)||(Ue[f]=[]),Ue[f].push(()=>{s[h]=je[f],++d,d===c.length&&i(s)}))}),c.length===0&&i(s)},In=e=>{var t=ft[e];delete ft[e];var n=t.rawConstructor,i=t.rawDestructor,s=t.fields,c=s.map(d=>d.getterReturnType).concat(s.map(d=>d.setterArgumentType));Re([e],c,d=>{var f={};return s.forEach((h,b)=>{var $=h.fieldName,O=d[b],D=h.getter,j=h.getterContext,J=d[b+s.length],K=h.setter,N=h.setterContext;f[$]={read:oe=>O.fromWireType(D(j,oe)),write:(oe,g)=>{var x=[];K(N,oe,J.toWireType(x,g)),Rt(x)}}}),[{name:t.name,fromWireType:h=>{var b={};for(var $ in f)b[$]=f[$].read(h);return i(h),b},toWireType:(h,b)=>{for(var $ in f)if(!($ in b))throw new TypeError(`Missing field: "${$}"`);var O=n();for($ in f)f[$].write(O,b[$]);return h!==null&&h.push(i,O),O},argPackAdvance:me,readValueFromPointer:It,destructorFunction:i}]})},Fn=(e,t,n,i,s)=>{},Vn=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);or=e},or,ae=e=>{for(var t="",n=e;q[n];)t+=or[q[n++]];return t},We,V=e=>{throw new We(e)};function Un(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i=t.name;if(e||V(`type "${i}" must have a positive integer typeid pointer`),je.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;V(`Cannot register type '${i}' twice`)}if(je[e]=t,delete vt[e],Ue.hasOwnProperty(e)){var s=Ue[e];delete Ue[e],s.forEach(c=>c())}}function pe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Un(e,t,n)}var me=8,Wn=(e,t,n,i)=>{t=ae(t),pe(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,c){return c?n:i},argPackAdvance:me,readValueFromPointer:function(s){return this.fromWireType(q[s])},destructorFunction:null})},Ln=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ft=e=>{function t(n){return n.$$.ptrType.registeredClass.name}V(t(e)+" instance already deleted")},Vt=!1,ir=e=>{},Hn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},sr=e=>{e.count.value-=1;var t=e.count.value===0;t&&Hn(e)},ur=(e,t,n)=>{if(t===n)return e;if(n.baseClass===void 0)return null;var i=ur(e,t,n.baseClass);return i===null?null:n.downcast(i)},lr={},Nn=()=>Object.keys(Qe).length,Bn=()=>{var e=[];for(var t in Qe)Qe.hasOwnProperty(t)&&e.push(Qe[t]);return e},Je=[],Ut=()=>{for(;Je.length;){var e=Je.pop();e.$$.deleteScheduled=!1,e.delete()}},Ye,qn=e=>{Ye=e,Je.length&&Ye&&Ye(Ut)},zn=()=>{a.getInheritedInstanceCount=Nn,a.getLiveInheritedInstances=Bn,a.flushPendingDeletes=Ut,a.setDelayFunction=qn},Qe={},Gn=(e,t)=>{for(t===void 0&&V("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Jn=(e,t)=>(t=Gn(e,t),Qe[t]),mt=(e,t)=>{(!t.ptrType||!t.ptr)&&pt("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,i=!!t.smartPtr;return n!==i&&pt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Xe(Object.create(e,{$$:{value:t,writable:!0}}))};function Yn(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Jn(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var i=n.clone();return this.destructor(e),i}function s(){return this.isSmartPointer?mt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):mt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(t),d=lr[c];if(!d)return s.call(this);var f;this.isConst?f=d.constPointerType:f=d.pointerType;var h=ur(t,this.registeredClass,f.registeredClass);return h===null?s.call(this):this.isSmartPointer?mt(f.registeredClass.instancePrototype,{ptrType:f,ptr:h,smartPtrType:this,smartPtr:e}):mt(f.registeredClass.instancePrototype,{ptrType:f,ptr:h})}var Xe=e=>typeof FinalizationRegistry>"u"?(Xe=t=>t,e):(Vt=new FinalizationRegistry(t=>{sr(t.$$)}),Xe=t=>{var n=t.$$,i=!!n.smartPtr;if(i){var s={$$:n};Vt.register(t,s,t)}return t},ir=t=>Vt.unregister(t),Xe(e)),Qn=()=>{Object.assign(ht.prototype,{isAliasOf(e){if(!(this instanceof ht)||!(e instanceof ht))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return t===i&&n===s},clone(){if(this.$$.ptr||Ft(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Xe(Object.create(Object.getPrototypeOf(this),{$$:{value:Ln(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&V("Object already scheduled for deletion"),ir(this),sr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&V("Object already scheduled for deletion"),Je.push(this),Je.length===1&&Ye&&Ye(Ut),this.$$.deleteScheduled=!0,this}})};function ht(){}var Ke=(e,t)=>Object.defineProperty(t,"name",{value:e}),cr=(e,t,n)=>{if(e[t].overloadTable===void 0){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||V(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}},Wt=(e,t,n)=>{a.hasOwnProperty(e)?((n===void 0||a[e].overloadTable!==void 0&&a[e].overloadTable[n]!==void 0)&&V(`Cannot register public name '${e}' twice`),cr(a,e,e),a.hasOwnProperty(n)&&V(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),a[e].overloadTable[n]=t):(a[e]=t,n!==void 0&&(a[e].numArguments=n))},Xn=48,Kn=57,Zn=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Xn&&t<=Kn?`_${e}`:e};function ea(e,t,n,i,s,c,d,f){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=s,this.getActualType=c,this.upcast=d,this.downcast=f,this.pureVirtualFunctions=[]}var Lt=(e,t,n)=>{for(;t!==n;)t.upcast||V(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function ta(e,t){if(t===null)return this.isReference&&V(`null is not a valid ${this.name}`),0;t.$$||V(`Cannot pass "${zt(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,i=Lt(t.$$.ptr,n,this.registeredClass);return i}function ra(e,t){var n;if(t===null)return this.isReference&&V(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;(!t||!t.$$)&&V(`Cannot pass "${zt(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&V(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass;if(n=Lt(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&V("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:V(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var s=t.clone();n=this.rawShare(n,be.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,n)}break;default:V("Unsupporting sharing policy")}return n}function na(e,t){if(t===null)return this.isReference&&V(`null is not a valid ${this.name}`),0;t.$$||V(`Cannot pass "${zt(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&V(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,i=Lt(t.$$.ptr,n,this.registeredClass);return i}function dr(e){return this.fromWireType(k[e>>2])}var aa=()=>{Object.assign(yt.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:me,readValueFromPointer:dr,deleteObject(e){e!==null&&e.delete()},fromWireType:Yn})};function yt(e,t,n,i,s,c,d,f,h,b,$){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=i,this.isSmartPointer=s,this.pointeeType=c,this.sharingPolicy=d,this.rawGetPointee=f,this.rawConstructor=h,this.rawShare=b,this.rawDestructor=$,!s&&t.baseClass===void 0?i?(this.toWireType=ta,this.destructorFunction=null):(this.toWireType=na,this.destructorFunction=null):this.toWireType=ra}var fr=(e,t,n)=>{a.hasOwnProperty(e)||pt("Replacing nonexistant public symbol"),a[e].overloadTable!==void 0&&n!==void 0?a[e].overloadTable[n]=t:(a[e]=t,a[e].argCount=n)},oa=(e,t,n)=>{var i=a["dynCall_"+e];return n&&n.length?i.apply(null,[t].concat(n)):i.call(null,t)},gt=[],vr,Y=e=>{var t=gt[e];return t||(e>=gt.length&&(gt.length=e+1),gt[e]=t=vr.get(e)),t},ia=(e,t,n)=>{if(e.includes("j"))return oa(e,t,n);var i=Y(t).apply(null,n);return i},sa=(e,t)=>{var n=[];return function(){return n.length=0,Object.assign(n,arguments),ia(e,t,n)}},ve=(e,t)=>{e=ae(e);function n(){return e.includes("j")?sa(e,t):Y(t)}var i=n();return typeof i!="function"&&V(`unknown function pointer with signature ${e}: ${t}`),i},ua=(e,t)=>{var n=Ke(t,function(i){this.name=t,this.message=i;var s=new Error(i).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},pr,mr=e=>{var t=Sr(e),n=ae(t);return Ce(t),n},wt=(e,t)=>{var n=[],i={};function s(c){if(!i[c]&&!je[c]){if(vt[c]){vt[c].forEach(s);return}n.push(c),i[c]=!0}}throw t.forEach(s),new pr(`${e}: `+n.map(mr).join([", "]))},la=(e,t,n,i,s,c,d,f,h,b,$,O,D)=>{$=ae($),c=ve(s,c),f&&(f=ve(d,f)),b&&(b=ve(h,b)),D=ve(O,D);var j=Zn($);Wt(j,function(){wt(`Cannot construct ${$} due to unbound types`,[i])}),Re([e,t,n],i?[i]:[],function(J){J=J[0];var K,N;i?(K=J.registeredClass,N=K.instancePrototype):N=ht.prototype;var oe=Ke($,function(){if(Object.getPrototypeOf(this)!==g)throw new We("Use 'new' to construct "+$);if(x.constructor_body===void 0)throw new We($+" has no accessible constructor");var kr=x.constructor_body[arguments.length];if(kr===void 0)throw new We(`Tried to invoke ctor of ${$} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(x.constructor_body).toString()}) parameters instead!`);return kr.apply(this,arguments)}),g=Object.create(N,{constructor:{value:oe}});oe.prototype=g;var x=new ea($,oe,g,D,K,c,f,b);if(x.baseClass){var Z,ne;(ne=(Z=x.baseClass).__derivedClasses)!==null&&ne!==void 0||(Z.__derivedClasses=[]),x.baseClass.__derivedClasses.push(x)}var Le=new yt($,x,!0,!1,!1),_t=new yt($+"*",x,!1,!1,!1),Ar=new yt($+" const*",x,!1,!0,!1);return lr[e]={pointerType:_t,constPointerType:Ar},fr(j,oe),[Le,_t,Ar]})},Ht=(e,t)=>{for(var n=[],i=0;i<e;i++)n.push(k[t+i*4>>2]);return n};function ca(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Nt(e,t,n,i,s,c){var d=t.length;d<2&&V("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&n!==null,h=ca(t),b=t[0].name!=="void",$=d-2,O=new Array($),D=[],j=[],J=function(){arguments.length!==$&&V(`function ${e} called with ${arguments.length} arguments, expected ${$}`),j.length=0;var K;D.length=f?2:1,D[0]=s,f&&(K=t[1].toWireType(j,this),D[1]=K);for(var N=0;N<$;++N)O[N]=t[N+2].toWireType(j,arguments[N]),D.push(O[N]);var oe=i.apply(null,D);function g(x){if(h)Rt(j);else for(var Z=f?1:2;Z<t.length;Z++){var ne=Z===1?K:O[Z-2];t[Z].destructorFunction!==null&&t[Z].destructorFunction(ne)}if(b)return t[0].fromWireType(x)}return g(oe)};return Ke(e,J)}var da=(e,t,n,i,s,c)=>{var d=Ht(t,n);s=ve(i,s),Re([],[e],function(f){f=f[0];var h=`constructor ${f.name}`;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new We(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return f.registeredClass.constructor_body[t-1]=()=>{wt(`Cannot construct ${f.name} due to unbound types`,d)},Re([],d,b=>(b.splice(1,0,null),f.registeredClass.constructor_body[t-1]=Nt(h,b,null,s,c),[])),[]})},hr=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},fa=(e,t,n,i,s,c,d,f,h)=>{var b=Ht(n,i);t=ae(t),t=hr(t),c=ve(s,c),Re([],[e],function($){$=$[0];var O=`${$.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&$.registeredClass.pureVirtualFunctions.push(t);function D(){wt(`Cannot call ${O} due to unbound types`,b)}var j=$.registeredClass.instancePrototype,J=j[t];return J===void 0||J.overloadTable===void 0&&J.className!==$.name&&J.argCount===n-2?(D.argCount=n-2,D.className=$.name,j[t]=D):(cr(j,t,O),j[t].overloadTable[n-2]=D),Re([],b,function(K){var N=Nt(O,K,$,c,d);return j[t].overloadTable===void 0?(N.argCount=n-2,j[t]=N):j[t].overloadTable[n-2]=N,[]}),[]})};function va(){Object.assign(yr.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function yr(){this.allocated=[void 0],this.freelist=[]}var le=new yr,Bt=e=>{e>=le.reserved&&--le.get(e).refcount===0&&le.free(e)},pa=()=>{for(var e=0,t=le.reserved;t<le.allocated.length;++t)le.allocated[t]!==void 0&&++e;return e},ma=()=>{le.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),le.reserved=le.allocated.length,a.count_emval_handles=pa},be={toValue:e=>(e||V("Cannot use deleted val. handle = "+e),le.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return le.allocate({refcount:1,value:e})}}},ha=(e,t)=>{t=ae(t),pe(e,{name:t,fromWireType:n=>{var i=be.toValue(n);return Bt(n),i},toWireType:(n,i)=>be.toHandle(i),argPackAdvance:me,readValueFromPointer:It,destructorFunction:null})},ya=(e,t,n)=>{switch(t){case 1:return n?function(i){return this.fromWireType(B[i>>0])}:function(i){return this.fromWireType(q[i>>0])};case 2:return n?function(i){return this.fromWireType(ie[i>>1])}:function(i){return this.fromWireType(U[i>>1])};case 4:return n?function(i){return this.fromWireType(A[i>>2])}:function(i){return this.fromWireType(k[i>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},ga=(e,t,n,i)=>{t=ae(t);function s(){}s.values={},pe(e,{name:t,constructor:s,fromWireType:function(c){return this.constructor.values[c]},toWireType:(c,d)=>d.value,argPackAdvance:me,readValueFromPointer:ya(t,n,i),destructorFunction:null}),Wt(t,s)},qt=(e,t)=>{var n=je[e];return n===void 0&&V(t+" has unknown type "+mr(e)),n},wa=(e,t,n)=>{var i=qt(e,"enum");t=ae(t);var s=i.constructor,c=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:Ke(`${i.name}_${t}`,function(){})}});s.values[n]=c,s[t]=c},zt=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},ba=(e,t)=>{switch(t){case 4:return function(n){return this.fromWireType(de[n>>2])};case 8:return function(n){return this.fromWireType(fe[n>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ca=(e,t,n)=>{t=ae(t),pe(e,{name:t,fromWireType:i=>i,toWireType:(i,s)=>s,argPackAdvance:me,readValueFromPointer:ba(t,n),destructorFunction:null})},_a=(e,t,n,i,s,c,d)=>{var f=Ht(t,n);e=ae(e),e=hr(e),s=ve(i,s),Wt(e,function(){wt(`Cannot call ${e} due to unbound types`,f)},t-1),Re([],f,function(h){var b=[h[0],null].concat(h.slice(1));return fr(e,Nt(e,b,null,s,c),t-1),[]})},Ta=(e,t,n)=>{switch(t){case 1:return n?i=>B[i>>0]:i=>q[i>>0];case 2:return n?i=>ie[i>>1]:i=>U[i>>1];case 4:return n?i=>A[i>>2]:i=>k[i>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},$a=(e,t,n,i,s)=>{t=ae(t);var c=$=>$;if(i===0){var d=32-8*n;c=$=>$<<d>>>d}var f=t.includes("unsigned"),h=($,O)=>{},b;f?b=function($,O){return h(O,this.name),O>>>0}:b=function($,O){return h(O,this.name),O},pe(e,{name:t,fromWireType:c,toWireType:b,argPackAdvance:me,readValueFromPointer:Ta(t,n,i!==0),destructorFunction:null})},Sa=(e,t,n)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=i[t];function c(d){var f=k[d>>2],h=k[d+4>>2];return new s(B.buffer,h,f)}n=ae(n),pe(e,{name:n,fromWireType:c,argPackAdvance:me,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})},gr=(e,t,n,i)=>{if(!(i>0))return 0;for(var s=n,c=n+i-1,d=0;d<e.length;++d){var f=e.charCodeAt(d);if(f>=55296&&f<=57343){var h=e.charCodeAt(++d);f=65536+((f&1023)<<10)|h&1023}if(f<=127){if(n>=c)break;t[n++]=f}else if(f<=2047){if(n+1>=c)break;t[n++]=192|f>>6,t[n++]=128|f&63}else if(f<=65535){if(n+2>=c)break;t[n++]=224|f>>12,t[n++]=128|f>>6&63,t[n++]=128|f&63}else{if(n+3>=c)break;t[n++]=240|f>>18,t[n++]=128|f>>12&63,t[n++]=128|f>>6&63,t[n++]=128|f&63}}return t[n]=0,n-s},Pa=(e,t,n)=>gr(e,q,t,n),wr=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++n):t+=3}return t},br=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ea=(e,t,n)=>{for(var i=t+n,s=t;e[s]&&!(s>=i);)++s;if(s-t>16&&e.buffer&&br)return br.decode(e.subarray(t,s));for(var c="";t<s;){var d=e[t++];if(!(d&128)){c+=String.fromCharCode(d);continue}var f=e[t++]&63;if((d&224)==192){c+=String.fromCharCode((d&31)<<6|f);continue}var h=e[t++]&63;if((d&240)==224?d=(d&15)<<12|f<<6|h:d=(d&7)<<18|f<<12|h<<6|e[t++]&63,d<65536)c+=String.fromCharCode(d);else{var b=d-65536;c+=String.fromCharCode(55296|b>>10,56320|b&1023)}}return c},Gt=(e,t)=>e?Ea(q,e,t):"",xa=(e,t)=>{t=ae(t);var n=t==="std::string";pe(e,{name:t,fromWireType(i){var s=k[i>>2],c=i+4,d;if(n)for(var f=c,h=0;h<=s;++h){var b=c+h;if(h==s||q[b]==0){var $=b-f,O=Gt(f,$);d===void 0?d=O:(d+="\0",d+=O),f=b+1}}else{for(var D=new Array(s),h=0;h<s;++h)D[h]=String.fromCharCode(q[c+h]);d=D.join("")}return Ce(i),d},toWireType(i,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var c,d=typeof s=="string";d||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||V("Cannot pass non-string to std::string"),n&&d?c=wr(s):c=s.length;var f=Qt(4+c+1),h=f+4;if(k[f>>2]=c,n&&d)Pa(s,h,c+1);else if(d)for(var b=0;b<c;++b){var $=s.charCodeAt(b);$>255&&(Ce(h),V("String has UTF-16 code units that do not fit in 8 bits")),q[h+b]=$}else for(var b=0;b<c;++b)q[h+b]=s[b];return i!==null&&i.push(Ce,f),f},argPackAdvance:me,readValueFromPointer:dr,destructorFunction(i){Ce(i)}})},Cr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Oa=(e,t)=>{for(var n=e,i=n>>1,s=i+t/2;!(i>=s)&&U[i];)++i;if(n=i<<1,n-e>32&&Cr)return Cr.decode(q.subarray(e,n));for(var c="",d=0;!(d>=t/2);++d){var f=ie[e+d*2>>1];if(f==0)break;c+=String.fromCharCode(f)}return c},Ma=(e,t,n)=>{var i;if((i=n)!==null&&i!==void 0||(n=2147483647),n<2)return 0;n-=2;for(var s=t,c=n<e.length*2?n/2:e.length,d=0;d<c;++d){var f=e.charCodeAt(d);ie[t>>1]=f,t+=2}return ie[t>>1]=0,t-s},Da=e=>e.length*2,Aa=(e,t)=>{for(var n=0,i="";!(n>=t/4);){var s=A[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var c=s-65536;i+=String.fromCharCode(55296|c>>10,56320|c&1023)}else i+=String.fromCharCode(s)}return i},ka=(e,t,n)=>{var i;if((i=n)!==null&&i!==void 0||(n=2147483647),n<4)return 0;for(var s=t,c=s+n-4,d=0;d<e.length;++d){var f=e.charCodeAt(d);if(f>=55296&&f<=57343){var h=e.charCodeAt(++d);f=65536+((f&1023)<<10)|h&1023}if(A[t>>2]=f,t+=4,t+4>c)break}return A[t>>2]=0,t-s},ja=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&++n,t+=4}return t},Ra=(e,t,n)=>{n=ae(n);var i,s,c,d,f;t===2?(i=Oa,s=Ma,d=Da,c=()=>U,f=1):t===4&&(i=Aa,s=ka,d=ja,c=()=>k,f=2),pe(e,{name:n,fromWireType:h=>{for(var b=k[h>>2],$=c(),O,D=h+4,j=0;j<=b;++j){var J=h+4+j*t;if(j==b||$[J>>f]==0){var K=J-D,N=i(D,K);O===void 0?O=N:(O+="\0",O+=N),D=J+t}}return Ce(h),O},toWireType:(h,b)=>{typeof b!="string"&&V(`Cannot pass non-string to C++ string type ${n}`);var $=d(b),O=Qt(4+$+t);return k[O>>2]=$>>f,s(b,O+4,$+t),h!==null&&h.push(Ce,O),O},argPackAdvance:me,readValueFromPointer:It,destructorFunction(h){Ce(h)}})},Ia=(e,t,n,i,s,c)=>{ft[e]={name:ae(t),rawConstructor:ve(n,i),rawDestructor:ve(s,c),fields:[]}},Fa=(e,t,n,i,s,c,d,f,h,b)=>{ft[e].fields.push({fieldName:ae(t),getterReturnType:n,getter:ve(i,s),getterContext:c,setterArgumentType:d,setter:ve(f,h),setterContext:b})},Va=(e,t)=>{t=ae(t),pe(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,i)=>{}})},Jt=[],Ua=(e,t,n,i)=>(e=Jt[e],t=be.toValue(t),e(null,t,n,i)),Wa={},La=e=>{var t=Wa[e];return t===void 0?ae(e):t},_r=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var n=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return n||delete t.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ha=e=>e===0?be.toHandle(_r()):(e=La(e),be.toHandle(_r()[e])),Na=e=>{var t=Jt.length;return Jt.push(e),t},Ba=(e,t)=>{for(var n=new Array(e),i=0;i<e;++i)n[i]=qt(k[t+i*4>>2],"parameter "+i);return n},qa=Reflect.construct,za=(e,t,n)=>{var i=[],s=e.toWireType(i,n);return i.length&&(k[t>>2]=be.toHandle(i)),s},Ga=(e,t,n)=>{var i=Ba(e,t),s=i.shift();e--;var c=new Array(e),d=(h,b,$,O)=>{for(var D=0,j=0;j<e;++j)c[j]=i[j].readValueFromPointer(O+D),D+=i[j].argPackAdvance;for(var J=n===1?qa(b,c):b.apply(h,c),j=0;j<e;++j){var K,N;(K=(N=i[j]).deleteObject)===null||K===void 0||K.call(N,c[j])}return za(s,$,J)},f=`methodCaller<(${i.map(h=>h.name).join(", ")}) => ${s.name}>`;return Na(Ke(f,d))},Ja=e=>{e>4&&(le.get(e).refcount+=1)},Ya=e=>{var t=be.toValue(e);Rt(t),Bt(e)},Qa=(e,t)=>{e=qt(e,"_emval_take_value");var n=e.readValueFromPointer(t);return be.toHandle(n)},Xa=()=>{z("")},Ka=(e,t,n)=>q.copyWithin(e,t,t+n),Za=()=>2147483648,eo=e=>{var t=R.buffer,n=(e-t.byteLength+65535)/65536;try{return R.grow(n),_e(),1}catch{}},to=e=>{var t=q.length;e>>>=0;var n=Za();if(e>n)return!1;for(var i=(h,b)=>h+(b-h%b)%b,s=1;s<=4;s*=2){var c=t*(1+.2/s);c=Math.min(c,e+100663296);var d=Math.min(n,i(Math.max(e,c),65536)),f=eo(d);if(f)return!0}return!1},Yt={},ro=()=>y||"./this.program",Ze=()=>{if(!Ze.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:ro()};for(var n in Yt)Yt[n]===void 0?delete t[n]:t[n]=Yt[n];var i=[];for(var n in t)i.push(`${n}=${t[n]}`);Ze.strings=i}return Ze.strings},no=(e,t)=>{for(var n=0;n<e.length;++n)B[t++>>0]=e.charCodeAt(n);B[t>>0]=0},ao=(e,t)=>{var n=0;return Ze().forEach((i,s)=>{var c=t+n;k[e+s*4>>2]=c,no(i,c),n+=i.length+1}),0},oo=(e,t)=>{var n=Ze();k[e>>2]=n.length;var i=0;return n.forEach(s=>i+=s.length+1),k[t>>2]=i,0},io=e=>e,bt=e=>e%4===0&&(e%100!==0||e%400===0),so=(e,t)=>{for(var n=0,i=0;i<=t;n+=e[i++]);return n},Tr=[31,29,31,30,31,30,31,31,30,31,30,31],$r=[31,28,31,30,31,30,31,31,30,31,30,31],uo=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var i=bt(n.getFullYear()),s=n.getMonth(),c=(i?Tr:$r)[s];if(t>c-n.getDate())t-=c-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n};function lo(e,t,n){var i=wr(e)+1,s=new Array(i);return gr(e,s,0,s.length),s}var co=(e,t)=>{B.set(e,t)},fo=(e,t,n,i)=>{var s=k[i+40>>2],c={tm_sec:A[i>>2],tm_min:A[i+4>>2],tm_hour:A[i+8>>2],tm_mday:A[i+12>>2],tm_mon:A[i+16>>2],tm_year:A[i+20>>2],tm_wday:A[i+24>>2],tm_yday:A[i+28>>2],tm_isdst:A[i+32>>2],tm_gmtoff:A[i+36>>2],tm_zone:s?Gt(s):""},d=Gt(n),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var h in f)d=d.replace(new RegExp(h,"g"),f[h]);var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$=["January","February","March","April","May","June","July","August","September","October","November","December"];function O(g,x,Z){for(var ne=typeof g=="number"?g.toString():g||"";ne.length<x;)ne=Z[0]+ne;return ne}function D(g,x){return O(g,x,"0")}function j(g,x){function Z(Le){return Le<0?-1:Le>0?1:0}var ne;return(ne=Z(g.getFullYear()-x.getFullYear()))===0&&(ne=Z(g.getMonth()-x.getMonth()))===0&&(ne=Z(g.getDate()-x.getDate())),ne}function J(g){switch(g.getDay()){case 0:return new Date(g.getFullYear()-1,11,29);case 1:return g;case 2:return new Date(g.getFullYear(),0,3);case 3:return new Date(g.getFullYear(),0,2);case 4:return new Date(g.getFullYear(),0,1);case 5:return new Date(g.getFullYear()-1,11,31);case 6:return new Date(g.getFullYear()-1,11,30)}}function K(g){var x=uo(new Date(g.tm_year+1900,0,1),g.tm_yday),Z=new Date(x.getFullYear(),0,4),ne=new Date(x.getFullYear()+1,0,4),Le=J(Z),_t=J(ne);return j(Le,x)<=0?j(_t,x)<=0?x.getFullYear()+1:x.getFullYear():x.getFullYear()-1}var N={"%a":g=>b[g.tm_wday].substring(0,3),"%A":g=>b[g.tm_wday],"%b":g=>$[g.tm_mon].substring(0,3),"%B":g=>$[g.tm_mon],"%C":g=>{var x=g.tm_year+1900;return D(x/100|0,2)},"%d":g=>D(g.tm_mday,2),"%e":g=>O(g.tm_mday,2," "),"%g":g=>K(g).toString().substring(2),"%G":g=>K(g),"%H":g=>D(g.tm_hour,2),"%I":g=>{var x=g.tm_hour;return x==0?x=12:x>12&&(x-=12),D(x,2)},"%j":g=>D(g.tm_mday+so(bt(g.tm_year+1900)?Tr:$r,g.tm_mon-1),3),"%m":g=>D(g.tm_mon+1,2),"%M":g=>D(g.tm_min,2),"%n":()=>`
`,"%p":g=>g.tm_hour>=0&&g.tm_hour<12?"AM":"PM","%S":g=>D(g.tm_sec,2),"%t":()=>"	","%u":g=>g.tm_wday||7,"%U":g=>{var x=g.tm_yday+7-g.tm_wday;return D(Math.floor(x/7),2)},"%V":g=>{var x=Math.floor((g.tm_yday+7-(g.tm_wday+6)%7)/7);if((g.tm_wday+371-g.tm_yday-2)%7<=2&&x++,x){if(x==53){var Z=(g.tm_wday+371-g.tm_yday)%7;Z!=4&&(Z!=3||!bt(g.tm_year))&&(x=1)}}else{x=52;var ne=(g.tm_wday+7-g.tm_yday-1)%7;(ne==4||ne==5&&bt(g.tm_year%400-1))&&x++}return D(x,2)},"%w":g=>g.tm_wday,"%W":g=>{var x=g.tm_yday+7-(g.tm_wday+6)%7;return D(Math.floor(x/7),2)},"%y":g=>(g.tm_year+1900).toString().substring(2),"%Y":g=>g.tm_year+1900,"%z":g=>{var x=g.tm_gmtoff,Z=x>=0;return x=Math.abs(x)/60,x=x/60*100+x%60,(Z?"+":"-")+("0000"+x).slice(-4)},"%Z":g=>g.tm_zone,"%%":()=>"%"};d=d.replace(/%%/g,"\0\0");for(var h in N)d.includes(h)&&(d=d.replace(new RegExp(h,"g"),N[h](c)));d=d.replace(/\0\0/g,"%");var oe=lo(d);return oe.length>t?0:(co(oe,e),oe.length-1)},vo=(e,t,n,i,s)=>fo(e,t,n,i);ar=a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Vn(),We=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Qn(),zn(),aa(),pr=a.UnboundTypeError=ua(Error,"UnboundTypeError"),va(),ma();var po={s:En,u:xn,b:Mn,g:Dn,q:An,J:kn,f:jn,V:Rn,d:On,da:In,Q:Fn,_:Wn,ca:la,ba:da,w:fa,Y:ha,x:ga,h:wa,L:Ca,M:_a,t:$a,o:Sa,K:xa,C:Ra,A:Ia,ea:Fa,$:Va,R:Ua,ha:Bt,fa:Ha,Z:Ga,N:Ja,O:Ya,aa:Qa,B:Xa,X:Ka,W:to,T:ao,U:oo,E:Mo,D:wo,F:Oo,n:Do,a:mo,e:Co,m:go,k:To,H:Eo,v:So,G:xo,z:ko,P:Ro,l:_o,j:bo,c:yo,p:ho,I:Po,r:Ao,i:$o,y:jo,ga:io,S:vo},te=Pn(),Ce=a._free=e=>(Ce=a._free=te.ka)(e),Qt=a._malloc=e=>(Qt=a._malloc=te.la)(e),Sr=e=>(Sr=te.na)(e),G=(e,t)=>(G=te.oa)(e,t),et=e=>(et=te.pa)(e),Q=()=>(Q=te.qa)(),X=e=>(X=te.ra)(e),Pr=e=>(Pr=te.sa)(e),Er=e=>(Er=te.ta)(e),xr=(e,t,n)=>(xr=te.ua)(e,t,n),Or=e=>(Or=te.va)(e);a.dynCall_viijii=(e,t,n,i,s,c,d)=>(a.dynCall_viijii=te.wa)(e,t,n,i,s,c,d);var Mr=a.dynCall_jiiii=(e,t,n,i,s)=>(Mr=a.dynCall_jiiii=te.xa)(e,t,n,i,s);a.dynCall_iiiiij=(e,t,n,i,s,c,d)=>(a.dynCall_iiiiij=te.ya)(e,t,n,i,s,c,d),a.dynCall_iiiiijj=(e,t,n,i,s,c,d,f,h)=>(a.dynCall_iiiiijj=te.za)(e,t,n,i,s,c,d,f,h),a.dynCall_iiiiiijj=(e,t,n,i,s,c,d,f,h,b)=>(a.dynCall_iiiiiijj=te.Aa)(e,t,n,i,s,c,d,f,h,b);function mo(e,t){var n=Q();try{return Y(e)(t)}catch(i){if(X(n),i!==i+0)throw i;G(1,0)}}function ho(e,t,n,i){var s=Q();try{Y(e)(t,n,i)}catch(c){if(X(s),c!==c+0)throw c;G(1,0)}}function yo(e,t,n){var i=Q();try{Y(e)(t,n)}catch(s){if(X(i),s!==s+0)throw s;G(1,0)}}function go(e,t,n,i){var s=Q();try{return Y(e)(t,n,i)}catch(c){if(X(s),c!==c+0)throw c;G(1,0)}}function wo(e,t,n,i,s){var c=Q();try{return Y(e)(t,n,i,s)}catch(d){if(X(c),d!==d+0)throw d;G(1,0)}}function bo(e,t){var n=Q();try{Y(e)(t)}catch(i){if(X(n),i!==i+0)throw i;G(1,0)}}function Co(e,t,n){var i=Q();try{return Y(e)(t,n)}catch(s){if(X(i),s!==s+0)throw s;G(1,0)}}function _o(e){var t=Q();try{Y(e)()}catch(n){if(X(t),n!==n+0)throw n;G(1,0)}}function To(e,t,n,i,s){var c=Q();try{return Y(e)(t,n,i,s)}catch(d){if(X(c),d!==d+0)throw d;G(1,0)}}function $o(e,t,n,i,s,c,d,f,h,b,$){var O=Q();try{Y(e)(t,n,i,s,c,d,f,h,b,$)}catch(D){if(X(O),D!==D+0)throw D;G(1,0)}}function So(e,t,n,i,s,c,d){var f=Q();try{return Y(e)(t,n,i,s,c,d)}catch(h){if(X(f),h!==h+0)throw h;G(1,0)}}function Po(e,t,n,i,s){var c=Q();try{Y(e)(t,n,i,s)}catch(d){if(X(c),d!==d+0)throw d;G(1,0)}}function Eo(e,t,n,i,s,c){var d=Q();try{return Y(e)(t,n,i,s,c)}catch(f){if(X(d),f!==f+0)throw f;G(1,0)}}function xo(e,t,n,i,s,c,d,f){var h=Q();try{return Y(e)(t,n,i,s,c,d,f)}catch(b){if(X(h),b!==b+0)throw b;G(1,0)}}function Oo(e,t,n,i){var s=Q();try{return Y(e)(t,n,i)}catch(c){if(X(s),c!==c+0)throw c;G(1,0)}}function Mo(e,t,n,i){var s=Q();try{return Y(e)(t,n,i)}catch(c){if(X(s),c!==c+0)throw c;G(1,0)}}function Do(e){var t=Q();try{return Y(e)()}catch(n){if(X(t),n!==n+0)throw n;G(1,0)}}function Ao(e,t,n,i,s,c,d,f){var h=Q();try{Y(e)(t,n,i,s,c,d,f)}catch(b){if(X(h),b!==b+0)throw b;G(1,0)}}function ko(e,t,n,i,s,c,d,f,h,b,$,O){var D=Q();try{return Y(e)(t,n,i,s,c,d,f,h,b,$,O)}catch(j){if(X(D),j!==j+0)throw j;G(1,0)}}function jo(e,t,n,i,s,c,d,f,h,b,$,O,D,j,J,K){var N=Q();try{Y(e)(t,n,i,s,c,d,f,h,b,$,O,D,j,J,K)}catch(oe){if(X(N),oe!==oe+0)throw oe;G(1,0)}}function Ro(e,t,n,i,s){var c=Q();try{return Mr(e,t,n,i,s)}catch(d){if(X(c),d!==d+0)throw d;G(1,0)}}var Ct;P=function e(){Ct||Dr(),Ct||(P=e)};function Dr(){if(ue>0||(Ve(),ue>0))return;function e(){Ct||(Ct=!0,a.calledRun=!0,!L&&(Ae(),u(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),qe()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),e()},1)):e()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return Dr(),o.ready}})();function Ei(r){return rr(nr,r)}async function xi(r,o){return Si(nr,r,o)}async function Oi(r,o){return Pi(nr,r,o)}var at;class Zt extends EventTarget{constructor(o={}){var a;super(),ti(this,at,void 0);try{const u=(a=o==null?void 0:o.formats)==null?void 0:a.filter(l=>l!=="unknown");if((u==null?void 0:u.length)===0)throw new TypeError("Hint option provided, but is empty.");u==null||u.forEach(l=>{if(!Pt.has(l))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${l}' is not a valid enum value of type BarcodeFormat.`)}),ri(this,at,u??[]),Ei().then(l=>{this.dispatchEvent(new CustomEvent("load",{detail:l}))}).catch(l=>{this.dispatchEvent(new CustomEvent("error",{detail:l}))})}catch(u){throw Fr(u,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return ni.filter(o=>o!=="unknown")}async detect(o){try{const a=await ci(o);if(a===null)return[];let u;try{an(a)?u=await xi(a,{tryHarder:!0,formats:Ir(this,at).map(l=>Pt.get(l))}):u=await Oi(a,{tryHarder:!0,formats:Ir(this,at).map(l=>Pt.get(l))})}catch(l){throw console.error(l),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return u.map(l=>{const{topLeft:{x:p,y},topRight:{x:T,y:v},bottomLeft:{x:m,y:w},bottomRight:{x:C,y:I}}=l.position,F=Math.min(p,T,m,C),R=Math.min(y,v,w,I),L=Math.max(p,T,m,C),B=Math.max(y,v,w,I);return{boundingBox:new DOMRectReadOnly(F,R,L-F,B-R),rawValue:l.text,format:ai(l.format),cornerPoints:[{x:p,y},{x:T,y:v},{x:C,y:I},{x:m,y:w}]}})}catch(a){throw Fr(a,"Failed to execute 'detect' on 'BarcodeDetector'")}}}at=new WeakMap;const ln=(r,o,a="error")=>{let u,l;const p=new Promise((y,T)=>{u=y,l=T,r.addEventListener(o,u),r.addEventListener(a,l)});return p.finally(()=>{r.removeEventListener(o,u),r.removeEventListener(a,l)}),p},Lr=r=>new Promise(o=>setTimeout(o,r));class cn extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Mi extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Di extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}const Ai=r=>{let o=!1,a;return(...u)=>(o||(a=r(u),o=!0),a)};function he(r,o){if(r===!1)throw new Error(o??"assertion failure")}function Hr(r){throw new Error("this code should be unreachable")}function ki(){return navigator.platform.toUpperCase().includes("MAC")}let dn;async function ji(r){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new Zt({formats:r});const o=await window.BarcodeDetector.getSupportedFormats(),a=r.filter(u=>!o.includes(u));return a.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(a)}. Will use polyfill.`),new Zt({formats:r})):ki()&&r.includes("pdf417")?(console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."),new Zt({formats:r})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:r}))}async function fn(r){dn=await ji(r)}const Ri=async(r,{detectHandler:o,locateHandler:a,minDelay:u,formats:l})=>{console.debug("[vue-qrcode-reader] start scanning"),await fn(l);const p=y=>async T=>{if(r.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:v,contentBefore:m,lastScanHadContent:w}=y;if(T-v<u)window.requestAnimationFrame(p(y));else{const C=await dn.detect(r),I=C.some(L=>!m.includes(L.rawValue));I&&o(C);const F=C.length>0;F&&a(C),!F&&w&&a(C);const R={lastScanned:T,lastScanHadContent:F,contentBefore:I?C.map(L=>L.rawValue):m};window.requestAnimationFrame(p(R))}}};p({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var vn={},se={};Object.defineProperty(se,"__esModule",{value:!0});se.compactObject=hn;se.deprecated=Bi;var Ii=se.detectBrowser=qi;se.disableLog=Li;se.disableWarnings=Hi;se.extractVersion=Et;se.filterStats=zi;se.log=Ni;se.walkStats=Ot;se.wrapPeerConnectionEvent=Wi;function Fi(r,o,a){return o=Vi(o),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r}function Vi(r){var o=Ui(r,"string");return Me(o)==="symbol"?o:String(o)}function Ui(r,o){if(Me(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var u=a.call(r,o);if(Me(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}function Me(r){"@babel/helpers - typeof";return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Me(r)}var pn=!0,mn=!0;function Et(r,o,a){var u=r.match(o);return u&&u.length>=a&&parseInt(u[a],10)}function Wi(r,o,a){if(r.RTCPeerConnection){var u=r.RTCPeerConnection.prototype,l=u.addEventListener;u.addEventListener=function(y,T){if(y!==o)return l.apply(this,arguments);var v=function(m){var w=a(m);w&&(T.handleEvent?T.handleEvent(w):T(w))};return this._eventMap=this._eventMap||{},this._eventMap[o]||(this._eventMap[o]=new Map),this._eventMap[o].set(T,v),l.apply(this,[y,v])};var p=u.removeEventListener;u.removeEventListener=function(y,T){if(y!==o||!this._eventMap||!this._eventMap[o])return p.apply(this,arguments);if(!this._eventMap[o].has(T))return p.apply(this,arguments);var v=this._eventMap[o].get(T);return this._eventMap[o].delete(T),this._eventMap[o].size===0&&delete this._eventMap[o],Object.keys(this._eventMap).length===0&&delete this._eventMap,p.apply(this,[y,v])},Object.defineProperty(u,"on"+o,{get:function(){return this["_on"+o]},set:function(y){this["_on"+o]&&(this.removeEventListener(o,this["_on"+o]),delete this["_on"+o]),y&&this.addEventListener(o,this["_on"+o]=y)},enumerable:!0,configurable:!0})}}function Li(r){return typeof r!="boolean"?new Error("Argument type: "+Me(r)+". Please use a boolean."):(pn=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Hi(r){return typeof r!="boolean"?new Error("Argument type: "+Me(r)+". Please use a boolean."):(mn=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Ni(){if((typeof window>"u"?"undefined":Me(window))==="object"){if(pn)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bi(r,o){mn&&console.warn(r+" is deprecated, please use "+o+" instead.")}function qi(r){var o={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return o.browser="Not a browser.",o;var a=r.navigator;if(a.mozGetUserMedia)o.browser="firefox",o.version=Et(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)o.browser="chrome",o.version=Et(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&a.userAgent.match(/AppleWebKit\/(\d+)\./))o.browser="safari",o.version=Et(a.userAgent,/AppleWebKit\/(\d+)\./,1),o.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return o.browser="Not a supported browser.",o;return o}function Nr(r){return Object.prototype.toString.call(r)==="[object Object]"}function hn(r){return Nr(r)?Object.keys(r).reduce(function(o,a){var u=Nr(r[a]),l=u?hn(r[a]):r[a],p=u&&!Object.keys(l).length;return l===void 0||p?o:Object.assign(o,Fi({},a,l))},{}):r}function Ot(r,o,a){!o||a.has(o.id)||(a.set(o.id,o),Object.keys(o).forEach(function(u){u.endsWith("Id")?Ot(r,r.get(o[u]),a):u.endsWith("Ids")&&o[u].forEach(function(l){Ot(r,r.get(l),a)})}))}function zi(r,o,a){var u=a?"outbound-rtp":"inbound-rtp",l=new Map;if(o===null)return l;var p=[];return r.forEach(function(y){y.type==="track"&&y.trackIdentifier===o.id&&p.push(y)}),p.forEach(function(y){r.forEach(function(T){T.type===u&&T.trackId===y.id&&Ot(r,T,l)})}),l}Object.defineProperty(vn,"__esModule",{value:!0});var Gi=vn.shimGetUserMedia=Qi,Ji=Yi(se);function yn(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(yn=function(u){return u?a:o})(r)}function Yi(r,o){if(r&&r.__esModule)return r;if(r===null||xe(r)!=="object"&&typeof r!="function")return{default:r};var a=yn(o);if(a&&a.has(r))return a.get(r);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var y=l?Object.getOwnPropertyDescriptor(r,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=r[p]}return u.default=r,a&&a.set(r,u),u}function xe(r){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xe(r)}var Br=Ji.log;function Qi(r,o){var a=r&&r.navigator;if(a.mediaDevices){var u=function(v){if(xe(v)!=="object"||v.mandatory||v.optional)return v;var m={};return Object.keys(v).forEach(function(w){if(!(w==="require"||w==="advanced"||w==="mediaSource")){var C=xe(v[w])==="object"?v[w]:{ideal:v[w]};C.exact!==void 0&&typeof C.exact=="number"&&(C.min=C.max=C.exact);var I=function(R,L){return R?R+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(C.ideal!==void 0){m.optional=m.optional||[];var F={};typeof C.ideal=="number"?(F[I("min",w)]=C.ideal,m.optional.push(F),F={},F[I("max",w)]=C.ideal,m.optional.push(F)):(F[I("",w)]=C.ideal,m.optional.push(F))}C.exact!==void 0&&typeof C.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[I("",w)]=C.exact):["min","max"].forEach(function(R){C[R]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[I(R,w)]=C[R])})}}),v.advanced&&(m.optional=(m.optional||[]).concat(v.advanced)),m},l=function(v,m){if(o.version>=61)return m(v);if(v=JSON.parse(JSON.stringify(v)),v&&xe(v.audio)==="object"){var w=function(R,L,B){L in R&&!(B in R)&&(R[B]=R[L],delete R[L])};v=JSON.parse(JSON.stringify(v)),w(v.audio,"autoGainControl","googAutoGainControl"),w(v.audio,"noiseSuppression","googNoiseSuppression"),v.audio=u(v.audio)}if(v&&xe(v.video)==="object"){var C=v.video.facingMode;C=C&&(xe(C)==="object"?C:{ideal:C});var I=o.version<66;if(C&&(C.exact==="user"||C.exact==="environment"||C.ideal==="user"||C.ideal==="environment")&&!(a.mediaDevices.getSupportedConstraints&&a.mediaDevices.getSupportedConstraints().facingMode&&!I)){delete v.video.facingMode;var F;if(C.exact==="environment"||C.ideal==="environment"?F=["back","rear"]:(C.exact==="user"||C.ideal==="user")&&(F=["front"]),F)return a.mediaDevices.enumerateDevices().then(function(R){R=R.filter(function(B){return B.kind==="videoinput"});var L=R.find(function(B){return F.some(function(q){return B.label.toLowerCase().includes(q)})});return!L&&R.length&&F.includes("back")&&(L=R[R.length-1]),L&&(v.video.deviceId=C.exact?{exact:L.deviceId}:{ideal:L.deviceId}),v.video=u(v.video),Br("chrome: "+JSON.stringify(v)),m(v)})}v.video=u(v.video)}return Br("chrome: "+JSON.stringify(v)),m(v)},p=function(v){return o.version>=64?v:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[v.name]||v.name,message:v.message,constraint:v.constraint||v.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},y=function(v,m,w){l(v,function(C){a.webkitGetUserMedia(C,m,function(I){w&&w(p(I))})})};if(a.getUserMedia=y.bind(a),a.mediaDevices.getUserMedia){var T=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(v){return l(v,function(m){return T(m).then(function(w){if(m.audio&&!w.getAudioTracks().length||m.video&&!w.getVideoTracks().length)throw w.getTracks().forEach(function(C){C.stop()}),new DOMException("","NotFoundError");return w},function(w){return Promise.reject(p(w))})})}}}}var gn={};Object.defineProperty(gn,"__esModule",{value:!0});var Xi=gn.shimGetUserMedia=es,Ki=Zi(se);function wn(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(wn=function(u){return u?a:o})(r)}function Zi(r,o){if(r&&r.__esModule)return r;if(r===null||He(r)!=="object"&&typeof r!="function")return{default:r};var a=wn(o);if(a&&a.has(r))return a.get(r);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var y=l?Object.getOwnPropertyDescriptor(r,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=r[p]}return u.default=r,a&&a.set(r,u),u}function He(r){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},He(r)}function es(r,o){var a=r&&r.navigator,u=r&&r.MediaStreamTrack;if(a.getUserMedia=function(v,m,w){Ki.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(v).then(m,w)},!(o.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){var l=function(v,m,w){m in v&&!(w in v)&&(v[w]=v[m],delete v[m])},p=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(v){return He(v)==="object"&&He(v.audio)==="object"&&(v=JSON.parse(JSON.stringify(v)),l(v.audio,"autoGainControl","mozAutoGainControl"),l(v.audio,"noiseSuppression","mozNoiseSuppression")),p(v)},u&&u.prototype.getSettings){var y=u.prototype.getSettings;u.prototype.getSettings=function(){var v=y.apply(this,arguments);return l(v,"mozAutoGainControl","autoGainControl"),l(v,"mozNoiseSuppression","noiseSuppression"),v}}if(u&&u.prototype.applyConstraints){var T=u.prototype.applyConstraints;u.prototype.applyConstraints=function(v){return this.kind==="audio"&&He(v)==="object"&&(v=JSON.parse(JSON.stringify(v)),l(v,"autoGainControl","mozAutoGainControl"),l(v,"noiseSuppression","mozNoiseSuppression")),T.apply(this,[v])}}}}var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.shimAudioContext=cs;ye.shimCallbacksAPI=os;ye.shimConstraints=_n;ye.shimCreateOfferLegacy=ls;var ts=ye.shimGetUserMedia=is;ye.shimLocalStreamsAPI=ns;ye.shimRTCIceServerUrls=ss;ye.shimRemoteStreamsAPI=as;ye.shimTrackEventTransceiver=us;var bn=rs(se);function Cn(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(Cn=function(u){return u?a:o})(r)}function rs(r,o){if(r&&r.__esModule)return r;if(r===null||De(r)!=="object"&&typeof r!="function")return{default:r};var a=Cn(o);if(a&&a.has(r))return a.get(r);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in r)if(p!=="default"&&Object.prototype.hasOwnProperty.call(r,p)){var y=l?Object.getOwnPropertyDescriptor(r,p):null;y&&(y.get||y.set)?Object.defineProperty(u,p,y):u[p]=r[p]}return u.default=r,a&&a.set(r,u),u}function De(r){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},De(r)}function ns(r){if(!(De(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var o=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(a){var u=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(function(l){return o.call(u,l,a)}),a.getVideoTracks().forEach(function(l){return o.call(u,l,a)})},r.RTCPeerConnection.prototype.addTrack=function(a){for(var u=this,l=arguments.length,p=new Array(l>1?l-1:0),y=1;y<l;y++)p[y-1]=arguments[y];return p&&p.forEach(function(T){u._localStreams?u._localStreams.includes(T)||u._localStreams.push(T):u._localStreams=[T]}),o.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(a){var u=this;this._localStreams||(this._localStreams=[]);var l=this._localStreams.indexOf(a);if(l!==-1){this._localStreams.splice(l,1);var p=a.getTracks();this.getSenders().forEach(function(y){p.includes(y.track)&&u.removeTrack(y)})}})}}function as(r){if(!(De(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(a){var u=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=function(l){l.streams.forEach(function(p){if(u._remoteStreams||(u._remoteStreams=[]),!u._remoteStreams.includes(p)){u._remoteStreams.push(p);var y=new Event("addstream");y.stream=p,u.dispatchEvent(y)}})})}});var o=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(u){u.streams.forEach(function(l){if(a._remoteStreams||(a._remoteStreams=[]),!(a._remoteStreams.indexOf(l)>=0)){a._remoteStreams.push(l);var p=new Event("addstream");p.stream=l,a.dispatchEvent(p)}})}),o.apply(a,arguments)}}}function os(r){if(!(De(r)!=="object"||!r.RTCPeerConnection)){var o=r.RTCPeerConnection.prototype,a=o.createOffer,u=o.createAnswer,l=o.setLocalDescription,p=o.setRemoteDescription,y=o.addIceCandidate;o.createOffer=function(v,m){var w=arguments.length>=2?arguments[2]:arguments[0],C=a.apply(this,[w]);return m?(C.then(v,m),Promise.resolve()):C},o.createAnswer=function(v,m){var w=arguments.length>=2?arguments[2]:arguments[0],C=u.apply(this,[w]);return m?(C.then(v,m),Promise.resolve()):C};var T=function(v,m,w){var C=l.apply(this,[v]);return w?(C.then(m,w),Promise.resolve()):C};o.setLocalDescription=T,T=function(v,m,w){var C=p.apply(this,[v]);return w?(C.then(m,w),Promise.resolve()):C},o.setRemoteDescription=T,T=function(v,m,w){var C=y.apply(this,[v]);return w?(C.then(m,w),Promise.resolve()):C},o.addIceCandidate=T}}function is(r){var o=r&&r.navigator;if(o.mediaDevices&&o.mediaDevices.getUserMedia){var a=o.mediaDevices,u=a.getUserMedia.bind(a);o.mediaDevices.getUserMedia=function(l){return u(_n(l))}}!o.getUserMedia&&o.mediaDevices&&o.mediaDevices.getUserMedia&&(o.getUserMedia=(function(l,p,y){o.mediaDevices.getUserMedia(l).then(p,y)}).bind(o))}function _n(r){return r&&r.video!==void 0?Object.assign({},r,{video:bn.compactObject(r.video)}):r}function ss(r){if(r.RTCPeerConnection){var o=r.RTCPeerConnection;r.RTCPeerConnection=function(a,u){if(a&&a.iceServers){for(var l=[],p=0;p<a.iceServers.length;p++){var y=a.iceServers[p];y.urls===void 0&&y.url?(bn.deprecated("RTCIceServer.url","RTCIceServer.urls"),y=JSON.parse(JSON.stringify(y)),y.urls=y.url,delete y.url,l.push(y)):l.push(a.iceServers[p])}a.iceServers=l}return new o(a,u)},r.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in o&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}}function us(r){De(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ls(r){var o=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);var u=this.getTransceivers().find(function(p){return p.receiver.track.kind==="audio"});a.offerToReceiveAudio===!1&&u?u.direction==="sendrecv"?u.setDirection?u.setDirection("sendonly"):u.direction="sendonly":u.direction==="recvonly"&&(u.setDirection?u.setDirection("inactive"):u.direction="inactive"):a.offerToReceiveAudio===!0&&!u&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);var l=this.getTransceivers().find(function(p){return p.receiver.track.kind==="video"});a.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):a.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return o.apply(this,arguments)}}function cs(r){De(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const ds=Ai(()=>{const r=Ii(window);switch(r.browser){case"chrome":Gi(window,r);break;case"firefox":Xi(window,r);break;case"safari":ts(window,r);break;default:throw new cn}});let Ne=Promise.resolve({type:"stop",data:{}});async function qr(r,o,a){var u,l,p;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(o)),window.isSecureContext!==!0)throw new Mi;if(((u=navigator==null?void 0:navigator.mediaDevices)==null?void 0:u.getUserMedia)===void 0)throw new cn;ds(),console.debug("[vue-qrcode-reader] calling getUserMedia");const y=await navigator.mediaDevices.getUserMedia({audio:!1,video:o});r.srcObject!==void 0?r.srcObject=y:r.mozSrcObject!==void 0?r.mozSrcObject=y:window.URL.createObjectURL?r.src=window.URL.createObjectURL(y):window.webkitURL?r.src=window.webkitURL.createObjectURL(y):r.src=y.id,r.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([ln(r,"loadeddata"),Lr(6e3).then(()=>{throw new Di})]),console.debug("[vue-qrcode-reader] video element loaded"),await Lr(500);const[T]=y.getVideoTracks(),v=(p=(l=T==null?void 0:T.getCapabilities)==null?void 0:l.call(T))!=null?p:{};let m=!1;return a&&v.torch&&(await T.applyConstraints({advanced:[{torch:!0}]}),m=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:r,stream:y,capabilities:v,constraints:o,isTorchOn:m}}}async function fs(r,{constraints:o,torch:a,restart:u=!1}){Ne=Ne.then(p=>{if(p.type==="start"){const{data:{videoEl:y,stream:T,constraints:v,isTorchOn:m}}=p;return!u&&r===y&&o===v&&a===m?p:Tn(y,T,m).then(()=>qr(r,o,a))}else if(p.type==="stop"||p.type==="failed")return qr(r,o,a);Hr()}).catch(p=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${p}"`),{type:"failed",error:p}));const l=await Ne;if(l.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(l.type==="failed")throw l.error;if(l.type==="start")return l.data.capabilities;Hr()}async function Tn(r,o,a){console.debug("[vue-qrcode-reader] stopping camera"),r.src="",r.srcObject=null,r.load(),await ln(r,"error");for(const u of o.getTracks())a!=null||await u.applyConstraints({advanced:[{torch:!1}]}),o.removeTrack(u),u.stop();return{type:"stop",data:{}}}async function $t(){if(Ne=Ne.then(r=>{if(r.type==="stop"||r.type==="failed")return r;const{data:{videoEl:o,stream:a,isTorchOn:u}}=r;return Tn(o,a,u)}),(await Ne).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const vs=Io({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:o}){const a=r,u=o,l=W(a.constraints),p=W(a.formats);tt(()=>a.constraints,(U,A)=>{JSON.stringify(U)!==JSON.stringify(A)&&(l.value=U)},{deep:!0}),tt(()=>a.formats,(U,A)=>{JSON.stringify(U)!==JSON.stringify(A)&&(p.value=U)},{deep:!0});const y=W(),T=W(),v=W(),m=W(!1),w=W(!1);er(()=>{w.value=!0}),Fo(()=>{$t()});const C=St(()=>({torch:a.torch,constraints:l.value,shouldStream:w.value&&!a.paused}));tt(C,async U=>{const A=v.value;he(A!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const k=y.value;he(k!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const de=k.getContext("2d");if(he(de!==null,"if cavnas is defined, canvas 2d context should also be non-null"),U.shouldStream){$t(),m.value=!1;try{const fe=await fs(A,U);w.value?(m.value=!0,u("camera-on",fe)):await $t()}catch(fe){u("error",fe)}}else k.width=A.videoWidth,k.height=A.videoHeight,de.drawImage(A,0,0,A.videoWidth,A.videoHeight),$t(),m.value=!1,u("camera-off")},{deep:!0}),tt(p,async U=>{w.value&&await fn(U)});const I=St(()=>C.value.shouldStream&&m.value);tt(I,U=>{if(U){he(y.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),F(y.value),he(T.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),F(T.value);const A=()=>a.track===void 0?500:40;he(v.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Ri(v.value,{detectHandler:k=>u("detect",k),formats:p.value,locateHandler:R,minDelay:A()})}});const F=U=>{const A=U.getContext("2d");he(A!==null,"canvas 2d context should always be non-null"),A.clearRect(0,0,U.width,U.height)},R=U=>{const A=T.value;he(A!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const k=v.value;if(he(k!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),U.length===0||a.track===void 0)F(A);else{const de=k.offsetWidth,fe=k.offsetHeight,_e=k.videoWidth,Te=k.videoHeight,$e=Math.max(de/_e,fe/Te),Se=_e*$e,Ve=Te*$e,Ae=Se/_e,qe=Ve/Te,ze=(de-Se)/2,Ge=(fe-Ve)/2,ke=({x:M,y:z})=>({x:Math.floor(M*Ae),y:Math.floor(z*qe)}),ue=({x:M,y:z})=>({x:Math.floor(M+ze),y:Math.floor(z+Ge)}),P=U.map(M=>{const{boundingBox:z,cornerPoints:ge}=M,{x:st,y:Pe}=ue(ke({x:z.x,y:z.y})),{x:ut,y:Dt}=ke({x:z.width,y:z.height});return{...M,cornerPoints:ge.map(lt=>ue(ke(lt))),boundingBox:DOMRectReadOnly.fromRect({x:st,y:Pe,width:ut,height:Dt})}});A.width=k.offsetWidth,A.height=k.offsetHeight;const _=A.getContext("2d");he(_!==null,"canvas 2d context should always be non-null"),a.track(P,_)}},L={width:"100%",height:"100%",position:"relative","z-index":"0"},B={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},q={width:"100%",height:"100%","object-fit":"cover"},ie=St(()=>I.value?q:{...q,visibility:"hidden",position:"absolute"});return(U,A)=>(ce(),ot("div",{style:L},[ee("video",{ref_key:"videoRef",ref:v,style:Vo(ie.value),autoplay:"",muted:"",playsinline:""},null,4),Uo(ee("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:y,style:q},null,512),[[Wo,!I.value]]),ee("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:T,style:B},null,512),ee("div",{style:B},[Lo(U.$slots,"default")])]))}}),ps={class:"d-flex align-center"},ms={class:"text-h5"},$n={__name:"InvoiceForm",props:{invoiceId:{type:Number,default:null}},emits:["saved","close"],setup(r,{emit:o}){const a=o,u=r,l=W({id:null,user_id:null,invoice_type_id:null,items:[],total_amount:0}),p=W([{title:"المنتج",key:"name"},{title:"الكمية",key:"quantity",align:"center"},{title:"السعر",key:"unit_price",align:"center"},{title:"الخصم",key:"discount",align:"center"},{title:"الإجمالي",key:"total",align:"center"},{title:"حذف",key:"actions",align:"center",sortable:!1}]),y=W([]),T=W([]),v=W([]),m=W(!1),w=W(!1),C=W(!1),I=W(1),F=W(!0),R=W(""),L=W(null),B=W(""),q=W(!1),ie=W(""),U=St(()=>l.value.items.reduce((P,_)=>P+(_.unit_price*_.quantity-_.discount),0)),A=P=>new Intl.NumberFormat("en-EG",{style:"currency",currency:"EGP",currencyDisplay:"symbol"}).format(P||0);er(async()=>{try{const P=await nt("invoice-types");if(v.value=P.data,!l.value.invoice_type_id&&v.value.length&&(l.value.invoice_type_id=v.value[0].id),u.invoiceId){const{data:_}=await Ho("invoices",u.invoiceId);l.value={..._,total_amount:U.value}}}catch(P){console.error("Error loading data:",P)}});async function k(P){const{data:_}=await nt("users",{search:P});return _}async function de(P,_=1){const{data:M}=await nt("products",{search:P,page:_});return M}const fe=async P=>{if(B.value=P||"",!P||P.length<3){y.value=[];return}try{w.value=!0,y.value=await k(P)}catch(_){y.value=[],console.error("Error searching users:",_)}finally{w.value=!1}},_e=async P=>{if(R.value=P||"",!P||P.length<3){T.value=[];return}try{C.value=!0;const _=await de(P,1);T.value=_.items||_,F.value=_.meta?_.meta.current_page<_.meta.last_page:!1}catch(_){T.value=[],console.error("Error searching products:",_)}finally{C.value=!1}},Te=async P=>{if(!F.value||!P.target)return;const{scrollTop:_,scrollHeight:M,clientHeight:z}=P.target;if(_+z>=M-50)try{I.value++;const{data:ge}=await de(R.value,I.value);T.value=[...T.value,...ge.items],F.value=ge.meta.current_page<ge.meta.last_page}catch(ge){console.error("Error loading more products:",ge)}},$e=P=>{const _=T.value.find(z=>z.id===P);if(!_)return;const M=l.value.items.find(z=>z.id===P);M?M.quantity++:l.value.items.push({id:_.id,name:_.name,quantity:1,unit_price:_.price,discount:0,total:_.price}),Ae()},Se=P=>{P&&(P.quantity=Math.max(1,P.quantity),P.discount=Math.max(0,P.discount),P.total=P.unit_price*P.quantity-P.discount,Ae())},Ve=P=>{l.value.items=l.value.items.filter(_=>_.id!==P),Ae()},Ae=()=>{l.value.total_amount=U.value};function qe(){ie.value=""}function ze(P){ie.value=P==="NotAllowedError"?"تم رفض إذن الكاميرا. يرجى السماح بالوصول للكاميرا.":P==="NotFoundError"?"لم يتم العثور على كاميرا.":"حدث خطأ أثناء تشغيل الكاميرا."}function Ge(P){q.value=!1,ie.value="",P&&ke(P)}async function ke(P){C.value=!0;try{const{data:_}=await nt("products",{serial:P});_&&_.length?$e(_[0].id):ie.value="لم يتم العثور على منتج بهذا الباركود."}finally{C.value=!1}}const ue=async()=>{try{m.value=!0;const P={...l.value,total_amount:U.value};await Jo("invoices",P,l.value.id),a("saved"),a("close")}catch(P){console.error("Error saving invoice:",P)}finally{m.value=!1}};return(P,_)=>(ce(),Fe(xt,{class:"w-100 h-100 pa-4"},{default:E(()=>[S(tr,{class:"d-flex align-center justify-space-between pb-2"},{default:E(()=>[ee("div",ps,[S(Ie,{class:"me-2",size:"28"},{default:E(()=>_[6]||(_[6]=[H("ri-file-list-3-line")])),_:1}),ee("span",ms,re(l.value.id?"تعديل فاتورة":"فاتورة جديدة"),1)]),l.value.status?(ce(),Fe(jr,{key:0,color:"success",class:"px-3"},{default:E(()=>[S(Ie,{left:"",small:""},{default:E(()=>_[7]||(_[7]=[H("ri-checkbox-circle-line")])),_:1}),H(" "+re(l.value.status),1)]),_:1})):it("",!0)]),_:1}),S(No),S(zr,{class:"overflow-y-auto",style:{"max-height":"calc(100vh - 200px)"}},{default:E(()=>[S(Bo,{onSubmit:qo(ue,["prevent"]),id:"invoice-form"},{default:E(()=>[S(Tt,{dense:"",class:"my-4"},{default:E(()=>[S(rt,{cols:"12",sm:"6"},{default:E(()=>[S(Xt,{modelValue:l.value.user_id,"onUpdate:modelValue":_[0]||(_[0]=M=>l.value.user_id=M),items:y.value,"item-title":"full_name","item-value":"id",label:"ابحث عن عميل","prepend-inner-icon":"ri-user-line",rules:[M=>!!M||"حقل العميل مطلوب"],clearable:"",loading:w.value,"no-data-text":B.value.length<3?"أدخل 3 أحرف على الأقل":"لا يوجد عميل","onUpdate:searchInput":fe,required:""},null,8,["modelValue","items","rules","loading","no-data-text"])]),_:1}),S(rt,{cols:"12",sm:"6"},{default:E(()=>[S(Xt,{modelValue:l.value.invoice_type_id,"onUpdate:modelValue":_[1]||(_[1]=M=>l.value.invoice_type_id=M),items:v.value,"item-title":"name","item-value":"id",label:"نوع الفاتورة","prepend-inner-icon":"ri-file-list-3-line",rules:[M=>!!M||"حقل نوع الفاتورة مطلوب"],clearable:"",required:""},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),S(Tt,{dense:"",class:"mb-4"},{default:E(()=>[S(rt,{cols:"12",sm:"6"},{default:E(()=>[S(Xt,{modelValue:L.value,"onUpdate:modelValue":[_[2]||(_[2]=M=>L.value=M),$e],items:T.value,"item-title":"name","item-value":"id",label:"ابحث عن منتج","prepend-inner-icon":"ri-search-line",clearable:"",loading:C.value,"no-data-text":R.value&&R.value.length<3?"أدخل 3 أحرف على الأقل":"لا يوجد منتج","onUpdate:searchInput":_e,onScrollPassive:Te},null,8,["modelValue","items","loading","no-data-text"])]),_:1}),S(rt,{cols:"12",sm:"6",class:"d-flex align-center"},{default:E(()=>[S(Oe,{icon:"",onClick:_[3]||(_[3]=M=>q.value=!0)},{default:E(()=>[S(Ie,null,{default:E(()=>_[8]||(_[8]=[H("ri-qr-scan-2-line")])),_:1})]),_:1}),_[9]||(_[9]=ee("span",{class:"ms-2"},"بحث بالباركود",-1))]),_:1})]),_:1}),S(Mt,{modelValue:q.value,"onUpdate:modelValue":_[4]||(_[4]=M=>q.value=M),"max-width":"400"},{default:E(()=>[S(xt,{class:"pa-2"},{default:E(()=>[S(zo(vs),{onDecode:Ge,onInit:qe,onError:ze}),ie.value?(ce(),Fe(Go,{key:0,type:"error",class:"mt-2",dense:"",border:"start","border-color":"error"},{default:E(()=>[H(re(ie.value),1)]),_:1})):it("",!0)]),_:1})]),_:1},8,["modelValue"]),S(Gr,{headers:p.value,items:l.value.items,"item-key":"id",class:"elevation-1","hide-default-footer":"",density:"compact"},{"no-data":E(()=>[S(Tt,{class:"pa-4"},{default:E(()=>[S(rt,{class:"text-center text-grey"},{default:E(()=>_[10]||(_[10]=[H(" لا توجد منتجات مضافة ")])),_:1})]),_:1})]),"item.name":E(({item:M})=>[H(re(M.name),1)]),"item.quantity":E(({item:M})=>[S(Rr,{modelValue:M.quantity,"onUpdate:modelValue":z=>M.quantity=z,modelModifiers:{number:!0},type:"number",min:"1",dense:"","hide-details":"",style:{"max-width":"60px"},onInput:z=>Se(M)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),"item.unit_price":E(({item:M})=>[H(re(A(M.unit_price)),1)]),"item.discount":E(({item:M})=>[S(Rr,{modelValue:M.discount,"onUpdate:modelValue":z=>M.discount=z,modelModifiers:{number:!0},type:"number",min:"0",max:M.unit_price,dense:"","hide-details":"",style:{"max-width":"60px"},onInput:z=>Se(M)},null,8,["modelValue","onUpdate:modelValue","max","onInput"])]),"item.total":E(({item:M})=>[H(re(A(M.total)),1)]),"item.actions":E(({item:M})=>[S(Oe,{icon:"",color:"error",onClick:z=>Ve(M.id)},{default:E(()=>[S(Ie,null,{default:E(()=>_[11]||(_[11]=[H("ri-delete-bin-line")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]),S(Tt,{justify:"end",class:"mt-4"},{default:E(()=>[S(jr,{color:"primary",class:"pa-3 text-h6"},{default:E(()=>[S(Ie,{left:""},{default:E(()=>_[12]||(_[12]=[H("ri-calculator-line")])),_:1}),H(" المجموع الكلي: "+re(A(l.value.total_amount)),1)]),_:1})]),_:1})]),_:1})]),_:1}),S(Jr,{class:"actions-sticky justify-start"},{default:E(()=>[S(Kt),S(Oe,{class:"elevation-4 px-4",color:"primary","append-icon":"ri-save-3-line",type:"submit",form:"invoice-form",loading:m.value},{default:E(()=>_[13]||(_[13]=[H(" حفظ ")])),_:1},8,["loading"]),S(Kt),S(Oe,{class:"elevation-4 px-4",color:"error","append-icon":"ri-close-line",onClick:_[5]||(_[5]=M=>P.$emit("close"))},{default:E(()=>_[14]||(_[14]=[H(" إلغاء ")])),_:1}),S(Kt)]),_:1})]),_:1}))}},hs={__name:"InvoiceTable",setup(r){const o=W([]),a=W(!1),u=W(!1),l=W({id:null,user_id:"",invoice_type_id:"",invoice_number:"",issue_date:"",due_date:"",total_amount:"",status:"",notes:"",items:[]});function p(){a.value=!0,nt("invoices").then(m=>{o.value=m.data,a.value=!1})}function y(m){l.value={...m},u.value=!0}function T(m){confirm("هل أنت متأكد من حذف الفاتورة؟")&&Qo("invoice",m.id).then(p)}function v(){u.value=!1,p()}return er(p),(m,w)=>(ce(),Fe(xt,null,{default:E(()=>[S(tr,{class:"ma-1"},{default:E(()=>w[2]||(w[2]=[H(" الفواتير ")])),_:1}),S(Gr,{items:o.value,loading:a.value,headers:[{title:"رقم الفاتورة",value:"invoice_number"},{title:"المستخدم",value:"user_id"},{title:"نوع الفاتورة",value:"invoice_type_id"},{title:"تاريخ الإصدار",value:"issue_date"},{title:"تاريخ الاستحقاق",value:"due_date"},{title:"المبلغ الإجمالي",value:"total_amount"},{title:"الحالة",value:"status"},{title:"تاريخ الإنشاء",value:"created_at"},{title:"إجراءات",value:"actions",sortable:!1}],"items-per-page-text":"عدد العناصر في الصفحة:","no-data-text":"لا توجد بيانات"},{"item.actions":E(({item:C})=>[S(Oe,{icon:"",onClick:I=>y(C)},{default:E(()=>[S(Ie,null,{default:E(()=>w[3]||(w[3]=[H("ri-pencil-line")])),_:1})]),_:2},1032,["onClick"]),S(Oe,{icon:"",color:"error",onClick:I=>T(C)},{default:E(()=>[S(Ie,null,{default:E(()=>w[4]||(w[4]=[H("ri-delete-bin-line")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items","loading"]),S(Mt,{modelValue:u.value,"onUpdate:modelValue":w[1]||(w[1]=C=>u.value=C),"max-width":"700"},{default:E(()=>[S($n,{"model-value":l.value,onSaved:v,onClose:w[0]||(w[0]=C=>u.value=!1)},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1}))}},ys=Yo(hs,[["__scopeId","data-v-863a2eed"]]),gs={key:0},ws={__name:"InvoiceDetails",props:{invoice:Object,visible:Boolean},setup(r){const o=r;return(a,u)=>(ce(),Fe(Mt,{modelValue:o.visible,"onUpdate:modelValue":u[1]||(u[1]=l=>o.visible=l),"max-width":"700"},{default:E(()=>[o.invoice?(ce(),Fe(xt,{key:0},{default:E(()=>[S(tr,null,{default:E(()=>[H("تفاصيل الفاتورة رقم "+re(o.invoice.invoice_number),1)]),_:1}),S(zr,null,{default:E(()=>[S(Xo,null,{default:E(()=>[S(Ee,null,{default:E(()=>[H("المستخدم: "+re(o.invoice.user_id),1)]),_:1}),S(Ee,null,{default:E(()=>[H("نوع الفاتورة: "+re(o.invoice.invoice_type_id),1)]),_:1}),S(Ee,null,{default:E(()=>[H("تاريخ الإصدار: "+re(o.invoice.issue_date),1)]),_:1}),S(Ee,null,{default:E(()=>[H("تاريخ الاستحقاق: "+re(o.invoice.due_date),1)]),_:1}),S(Ee,null,{default:E(()=>[H("المبلغ الإجمالي: "+re(o.invoice.total_amount),1)]),_:1}),S(Ee,null,{default:E(()=>[H("الحالة: "+re(o.invoice.status),1)]),_:1}),S(Ee,null,{default:E(()=>[H("ملاحظات: "+re(o.invoice.notes),1)]),_:1}),S(Ee,null,{default:E(()=>[H("تاريخ الإنشاء: "+re(o.invoice.created_at),1)]),_:1})]),_:1}),o.invoice.items&&o.invoice.items.length?(ce(),ot("div",gs,[u[3]||(u[3]=ee("h4",null,"عناصر الفاتورة:",-1)),S(Ko,null,{default:E(()=>[u[2]||(u[2]=ee("thead",null,[ee("tr",null,[ee("th",null,"المنتج"),ee("th",null,"الكمية"),ee("th",null,"سعر الوحدة"),ee("th",null,"الخصم"),ee("th",null,"الإجمالي")])],-1)),ee("tbody",null,[(ce(!0),ot(Zo,null,ei(o.invoice.items,l=>(ce(),ot("tr",{key:l.id},[ee("td",null,re(l.name),1),ee("td",null,re(l.quantity),1),ee("td",null,re(l.unit_price),1),ee("td",null,re(l.discount),1),ee("td",null,re(l.total),1)]))),128))])]),_:1})])):it("",!0)]),_:1}),S(Jr,{class:"justify-end"},{default:E(()=>[S(Oe,{color:"secondary",onClick:u[0]||(u[0]=l=>a.$emit("close"))},{default:E(()=>u[4]||(u[4]=[H("إغلاق")])),_:1})]),_:1})]),_:1})):it("",!0)]),_:1},8,["modelValue"]))}},Cs={__name:"index",setup(r){const o=W(!1),a=W(!1),u=W(null),l=W({});function p(v){l.value={...v},o.value=!0}function y(v){u.value=v,a.value=!0}function T(){l.value={},o.value=!0}return(v,m)=>(ce(),ot("div",null,[m[5]||(m[5]=ee("h2",null,"الفواتير",-1)),S(Oe,{color:"primary",class:"mb-4",onClick:T},{default:E(()=>m[4]||(m[4]=[H("إضافة فاتورة")])),_:1}),S(ys,{onEdit:p,onShow:y}),S(Mt,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=w=>o.value=w),fullscreen:v.$vuetify.display.xs,"max-width":"900"},{default:E(()=>[o.value?(ce(),Fe($n,{key:0,"model-value":l.value,onSaved:m[0]||(m[0]=w=>o.value=!1),onClose:m[1]||(m[1]=w=>o.value=!1)},null,8,["model-value"])):it("",!0)]),_:1},8,["modelValue","fullscreen"]),S(ws,{invoice:u.value,visible:a.value,onClose:m[3]||(m[3]=w=>a.value=!1)},null,8,["invoice","visible"])]))}};export{Cs as default};
