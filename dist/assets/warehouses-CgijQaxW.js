import{r as s,Q as q,l as k,k as a,aH as F,aq as S,o as f,d as l,b as n,a9 as i,ai as x,N as A,a as I,c as O,B as _,al as b,t as z,F as E,s as G,W as C,a1 as w,a4 as H,a5 as m,a6 as v,az as L,au as U,Z as B,Y as D,aa as g,$ as M,aG as Q}from"./index-mQB-Vo7t.js";const R={class:"d-flex flex-wrap gap-2 pa-3"},J={__name:"warehouses",setup(Y){const d=s(!1),r=s(!1),y=s(null),u=s({name:"",location:"",manager_name:"",capacity:null,status:"active",company_id:"",created_by:""}),V=s([]),$=s([{name:"نشط",value:"active"},{name:"غير نشط",value:"inactive"}]);function N(){if(!u.value.name){g.error("اسم المخزن مطلوب");return}M("warehouse",u.value,!1,!0,!0).then(()=>{p(),d.value=!1,u.value={name:"",location:"",manager_name:"",capacity:null,status:"active",company_id:"",created_by:""}}).catch(()=>g.error("حدث خطأ أثناء حفظ المخزن"))}function T(o){y.value=o,r.value=!0}function W(o){Q("warehouse",o).then(()=>{p(),r.value=!1}).catch(()=>g.error("حدث خطأ أثناء حذف المخزن"))}function p(){S("warehouses").then(o=>{V.value=o})}return q(()=>{p()}),(o,e)=>(f(),k(F,null,{default:a(()=>[l(i,{color:"primary",onClick:e[0]||(e[0]=t=>d.value=!0)},{default:a(()=>e[11]||(e[11]=[n("اضافة مخزن جديد")])),_:1}),l(C,{class:"mt-4 pa-3"},{default:a(()=>[l(x,null,{default:a(()=>e[12]||(e[12]=[n("المخازن")])),_:1}),l(A),I("div",R,[(f(!0),O(E,null,_(V.value,t=>(f(),k(b,{class:"pa-1",key:t.id,closable:"","onClick:close":Z=>T(t.id)},{default:a(()=>[n(z(t.name),1)]),_:2},1032,["onClick:close"]))),128)),V.value.length===0?(f(),k(b,{key:0},{default:a(()=>e[13]||(e[13]=[n("لا توجد مخازن حتى الآن")])),_:1})):G("",!0)])]),_:1}),l(D,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=t=>d.value=t),"max-width":"500px"},{default:a(()=>[l(C,null,{default:a(()=>[l(x,null,{default:a(()=>e[14]||(e[14]=[n("اضافة مخزن جديد")])),_:1}),l(w,null,{default:a(()=>[l(H,{dense:""},{default:a(()=>[l(m,{cols:"12"},{default:a(()=>[l(v,{modelValue:u.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.name=t),label:"اسم المخزن",rules:[t=>!!t||"اسم المخزن مطلوب"],required:"",dense:""},null,8,["modelValue","rules"])]),_:1}),l(m,{cols:"12"},{default:a(()=>[l(v,{modelValue:u.value.location,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.location=t),label:"الموقع",dense:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12"},{default:a(()=>[l(v,{modelValue:u.value.manager_name,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value.manager_name=t),label:"اسم المدير",dense:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12"},{default:a(()=>[l(v,{modelValue:u.value.capacity,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.capacity=t),label:"السعة",type:"number",dense:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12"},{default:a(()=>[l(L,{modelValue:u.value.status,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value.status=t),"item-value":"value","item-title":"name",items:$.value,label:"الحالة",required:"",dense:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(U,null,{default:a(()=>[l(B),l(i,{color:"blue darken-1",text:"",onClick:e[6]||(e[6]=t=>d.value=!1)},{default:a(()=>e[15]||(e[15]=[n("الغاء")])),_:1}),l(i,{color:"blue darken-1",text:"",onClick:N},{default:a(()=>e[16]||(e[16]=[n("حفظ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(D,{modelValue:r.value,"onUpdate:modelValue":e[10]||(e[10]=t=>r.value=t),"max-width":"400px"},{default:a(()=>[l(C,null,{default:a(()=>[l(x,null,{default:a(()=>e[17]||(e[17]=[n("تأكيد الحذف")])),_:1}),l(w,null,{default:a(()=>e[18]||(e[18]=[n("هل أنت متأكد من حذف هذا المخزن؟")])),_:1}),l(U,null,{default:a(()=>[l(B),l(i,{color:"grey darken-1",text:"",onClick:e[8]||(e[8]=t=>r.value=!1)},{default:a(()=>e[19]||(e[19]=[n("الغاء")])),_:1}),l(i,{color:"red darken-1",text:"",onClick:e[9]||(e[9]=t=>W(y.value))},{default:a(()=>e[20]||(e[20]=[n("حذف")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{J as default};
