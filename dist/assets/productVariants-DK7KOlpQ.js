import{_ as E}from"./AttributesDisplay-CPpLfNmw.js";import{_ as P,r,w as q,k as C,j as l,U as D,o as f,d as t,a6 as z,Y as b,a9 as g,b as n,t as k,q as x,ah as w,M as N,V as h,W as j,aj as K,a1 as M,c as I,ap as F,X as H,ak as W,$ as T,ao as X}from"./index-Bzz802DQ.js";const Y={key:0},G={key:1},J={__name:"productVariants",setup(L){const u=r(""),y=r([]),v=r(!0),V=r(0),s=r([]),d=r(!1),i=r(null),U=[{title:"اسم المنتج",key:"product_name"},{title:"SKU",key:"sku"},{title:"الباركود",key:"barcode"},{title:"الكمية",key:"quantity"},{title:" كمية التحزير ",key:"min_quantity"},{title:"سعر الشراء",key:"cost"},{title:"سعر الجملة",key:"wholesale_price"},{title:"سعر القطاعي",key:"retail_price"},{title:"الخصم",key:"discount"},{title:"الخصائص",key:"attributes"},{title:"الإجراء",key:"actions",sortable:!1}];async function p({page:a,itemsPerPage:e,sortBy:c}){v.value=!0;try{const o={page:a,per_page:e,search:u.value,...c.length?{sort_by:c[0].key,sort_desc:c[0].order==="desc"}:{}},m=await W("product-variants",o);y.value=m.data,V.value=m.total}catch(o){console.error("Error fetching product variants:",o),T.error("خطأ في جلب المتغيرات.")}finally{v.value=!1}}function A(a){i.value=a,d.value=!0}function S(){i.value=null,d.value=!0}function _(){d.value=!1,i.value=null}async function $(){try{let a=[];if(i.value?a.push(i.value.id):s.value.length>0&&(a={ids:s.value}),a.length===0)return;console.log("Deleting items with IDs:",a),await X("product-variant/delete",a),_(),s.value=[],p({page:1,itemsPerPage:10,sortBy:[]})}catch(a){console.error("Error deleting product variants:",a)}}function B(a){console.log("Edit item:",a),T.info(`جارٍ تعديل المتغير: ${a.sku}`)}return q(u,()=>{p({page:1,itemsPerPage:10,sortBy:[]})}),(a,e)=>{const c=E;return f(),C(D,{flat:""},{default:l(()=>[t(w,{class:"d-flex align-center pe-2"},{default:l(()=>[t(z,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),"prepend-inner-icon":"mdi-magnify",density:"compact",label:"بحث","single-line":"",flat:"","hide-details":"",variant:"solo-filled"},null,8,["modelValue"]),t(b),s.value.length>0?(f(),C(g,{key:0,color:"error",class:"ms-2",onClick:S},{default:l(()=>[n(" حذف المحدد ("+k(s.value.length)+") ",1)]),_:1})):x("",!0)]),_:1}),t(N),t(K,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value=o),headers:U,items:y.value,"items-length":V.value,loading:v.value,search:u.value,"item-value":"id","onUpdate:options":p,"show-select":"",class:"elevation-1"},{"item.attributes":l(({item:o})=>[t(c,{attributes:o.attributes,"font-size":"10px"},null,8,["attributes"])]),"item.actions":l(({item:o})=>[t(h,{size:"small",class:"me-2",onClick:m=>B(o)},{default:l(()=>e[3]||(e[3]=[n(" mdi-pencil ")])),_:2},1032,["onClick"]),t(h,{size:"small",onClick:m=>A(o)},{default:l(()=>e[4]||(e[4]=[n(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":l(()=>[t(j,{value:!0,color:"info",icon:"mdi-information"},{default:l(()=>e[5]||(e[5]=[n(" لا توجد بيانات متاحة لعرضها. ")])),_:1})]),_:1},8,["modelValue","items","items-length","loading","search"]),t(H,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),"max-width":"500px"},{default:l(()=>[t(D,null,{default:l(()=>[t(w,{class:"headline"},{default:l(()=>e[6]||(e[6]=[n("تأكيد الحذف")])),_:1}),t(M,null,{default:l(()=>[e[7]||(e[7]=n(" هل أنت متأكد أنك تريد حذف ")),i.value?(f(),I("span",Y,"هذا المتغير (SKU: "+k(i.value.sku)+")؟",1)):s.value.length>0?(f(),I("span",G,"المتغيرات المحددة ("+k(s.value.length)+").",1)):x("",!0),e[8]||(e[8]=n(" هذا الإجراء لا يمكن التراجع عنه. "))]),_:1}),t(F,null,{default:l(()=>[t(b),t(g,{color:"blue-darken-1",text:"",onClick:_},{default:l(()=>e[9]||(e[9]=[n("إلغاء")])),_:1}),t(g,{color:"error",text:"",onClick:$},{default:l(()=>e[10]||(e[10]=[n("حذف")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},R=P(J,[["__scopeId","data-v-a037eaec"]]);export{R as default};
